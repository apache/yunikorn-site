"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4307],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return g}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(t),m=r,g=c["".concat(l,".").concat(m)]||c[m]||d[m]||o;return t?a.createElement(g,s(s({ref:n},u),{},{components:t})):a.createElement(g,s({ref:n},u))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,s=new Array(o);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[c]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=t[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},77934:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return l},default:function(){return g},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return c}});var a=t(87462),r=t(63366),o=(t(67294),t(3905)),s=["components"],i={id:"scheduler",title:"Scheduler"},l=void 0,p={unversionedId:"api/scheduler",id:"version-0.12.2/api/scheduler",title:"Scheduler",description:"\x3c!--",source:"@site/versioned_docs/version-0.12.2/api/scheduler.md",sourceDirName:"api",slug:"/api/scheduler",permalink:"/docs/0.12.2/api/scheduler",draft:!1,tags:[],version:"0.12.2",frontMatter:{id:"scheduler",title:"Scheduler"},sidebar:"version-0.12.2/docs",previous:{title:"Cluster",permalink:"/docs/0.12.2/api/cluster"},next:{title:"System",permalink:"/docs/0.12.2/api/system"}},u={},c=[{value:"Partitions",id:"partitions",level:2},{value:"Success response",id:"success-response",level:3},{value:"Error response",id:"error-response",level:3},{value:"Queues",id:"queues",level:2},{value:"Partition queues",id:"partition-queues",level:3},{value:"Success response",id:"success-response-1",level:3},{value:"Error response",id:"error-response-1",level:3},{value:"All Queues",id:"all-queues",level:3},{value:"Success response",id:"success-response-2",level:3},{value:"Applications",id:"applications",level:2},{value:"Queue applications",id:"queue-applications",level:3},{value:"Success response",id:"success-response-3",level:3},{value:"Error response",id:"error-response-2",level:3},{value:"All applications",id:"all-applications",level:3},{value:"Success response",id:"success-response-4",level:3},{value:"Nodes",id:"nodes",level:2},{value:"Partition nodes",id:"partition-nodes",level:3},{value:"Success response",id:"success-response-5",level:3},{value:"Error response",id:"error-response-3",level:3},{value:"All nodes",id:"all-nodes",level:3},{value:"Success response",id:"success-response-6",level:3},{value:"Nodes utilization",id:"nodes-utilization",level:2},{value:"Goroutines info",id:"goroutines-info",level:2},{value:"Success response",id:"success-response-7",level:3},{value:"Error response",id:"error-response-4",level:3},{value:"Metrics",id:"metrics",level:2},{value:"Success response",id:"success-response-8",level:3},{value:"Configuration validation",id:"configuration-validation",level:2},{value:"Success response",id:"success-response-9",level:3},{value:"Allowed configuration",id:"allowed-configuration",level:4},{value:"Disallowed configuration",id:"disallowed-configuration",level:4},{value:"Configuration Create",id:"configuration-create",level:2},{value:"Success response",id:"success-response-10",level:3},{value:"Allowed configuration",id:"allowed-configuration-1",level:4},{value:"Disallowed configuration",id:"disallowed-configuration-1",level:4},{value:"Error response",id:"error-response-5",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Success response",id:"success-response-11",level:3},{value:"Configuration update",id:"configuration-update",level:2},{value:"Success response",id:"success-response-12",level:3},{value:"Failure response",id:"failure-response",level:3},{value:"Error response",id:"error-response-6",level:3},{value:"Application history",id:"application-history",level:2},{value:"Success response",id:"success-response-13",level:3},{value:"Error response",id:"error-response-7",level:3},{value:"Container history",id:"container-history",level:2},{value:"Success response",id:"success-response-14",level:3},{value:"Error response",id:"error-response-8",level:3},{value:"Endpoint healthcheck",id:"endpoint-healthcheck",level:2},{value:"Success response",id:"success-response-15",level:3},{value:"Retrieve full state dump",id:"retrieve-full-state-dump",level:2},{value:"Success response",id:"success-response-16",level:3},{value:"Failure response",id:"failure-response-1",level:3},{value:"Enable or disable periodic state dump to an external file inside the container which runs Yunikorn",id:"enable-or-disable-periodic-state-dump-to-an-external-file-inside-the-container-which-runs-yunikorn",level:2},{value:"Success response",id:"success-response-17",level:3},{value:"Error response",id:"error-response-9",level:3}],d={toc:c},m="wrapper";function g(e){var n=e.components,t=(0,r.Z)(e,s);return(0,o.kt)(m,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"partitions"},"Partitions"),(0,o.kt)("p",null,"Displays general information about the partition like name, state, capacity, used capacity and node sorting policy. "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/partitions")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "name": "[mycluster]default",\n        "state": "Active",\n        "lastStateTransitionTime": "2021-05-20 12:25:49.018953 +0530 IST m=+0.005949717",\n        "capacity": {\n            "capacity": "[memory:1000 vcore:1000]",\n            "usedCapacity": "[memory:800 vcore:500]"\n        },\n        "nodeSortingPolicy": {\n            "type": "fair",\n            "resourceWeights": {\n                "memory": 1.5,\n                "vcore": 1.3\n            }\n        },\n        "applications": {\n            "New": 5,\n            "Pending": 5,\n            "total": 10\n        }\n    },\n    {\n        "name": "[mycluster]gpu",\n        "state": "Active",\n        "lastStateTransitionTime": "2021-05-19 12:25:49.018953 +0530 IST m=+0.005949717",\n        "capacity": {\n            "capacity": "[memory:2000 vcore:2000]",\n            "usedCapacity": "[memory:500 vcore:300]"\n        },\n        "nodeSortingPolicy": {\n            "type": "binpacking",\n            "resourceWeights": {\n                "memory": 0,\n                "vcore": 4.11\n            }\n        },\n        "applications": {\n            "New": 5,\n            "Running": 10,\n            "Pending": 5,\n            "total": 20\n        }\n    }\n]\n')),(0,o.kt)("h3",{id:"error-response"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h2",{id:"queues"},"Queues"),(0,o.kt)("h3",{id:"partition-queues"},"Partition queues"),(0,o.kt)("p",null,"Fetch all Queues associated with given Partition and displays general information about the queues like name, status, capacities and properties.\nThe queues' hierarchy is kept in the response json.  "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/partition/{partitionName}/queues")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-1"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"For the default queue hierarchy (only ",(0,o.kt)("inlineCode",{parentName:"p"},"root.default")," leaf queue exists) a similar response to the following is sent back to the client:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n   {\n\n       "queuename": "root",\n       "status": "Active",\n       "maxResource": "[memory:8000 vcore:8000]",\n       "guaranteedResource": "[memory:54 vcore:80]",\n       "allocatedResource": "[memory:54 vcore:80]",\n       "isLeaf": "false",\n       "isManaged": "false",\n       "properties": {\n           "application.sort.policy":"stateaware"\n       },\n       "parent": "",\n       "partition": "[mycluster]default",\n       "children": [\n           {\n               "queuename": "root.default",\n               "status": "Active",\n               "maxResource": "[memory:8000 vcore:8000]",\n               "guaranteedResource": "[memory:54 vcore:80]",\n               "allocatedResource": "[memory:54 vcore:80]",\n               "isLeaf": "true",\n               "isManaged": "false",\n               "parent": "root"\n            }\n        ]\n    } \n]\n')),(0,o.kt)("h3",{id:"error-response-1"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"400 Bad Request")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 400,\n    "message": "Partition is missing in URL path. Please check the usage documentation",\n    "description": "Partition is missing in URL path. Please check the usage documentation"\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h3",{id:"all-queues"},"All Queues"),(0,o.kt)("p",null,"Fetch all Queues across different Partitions and displays general information about the queues like name, status, capacities and properties.\nThe queues' hierarchy is kept in the response json.  "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Status")," : Deprecated since v0.12.1, replaced by ",(0,o.kt)("a",{parentName:"p",href:"#partition-queues"},"Partition Queues")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/queues")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-2"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"For the default queue hierarchy (only ",(0,o.kt)("inlineCode",{parentName:"p"},"root.default")," leaf queue exists) a similar response to the following is sent back to the client:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "partitionName": "[mycluster]default",\n    "capacity": {\n        "capacity": "map[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:80000 pods:110 vcore:60000]",\n        "usedCapacity": "0"\n    },\n    "nodes": null,\n    "queues": {\n        "queuename": "root",\n        "status": "Active",\n        "capacities": {\n            "capacity": "[]",\n            "maxCapacity": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:80000 pods:110 vcore:60000]",\n            "usedCapacity": "[memory:8000 vcore:8000]",\n            "absUsedCapacity": "[memory:54 vcore:80]"\n        },\n        "queues": [\n            {\n                "queuename": "default",\n                "status": "Active",\n                "capacities": {\n                    "capacity": "[]",\n                    "maxCapacity": "[]",\n                    "usedCapacity": "[memory:8000 vcore:8000]",\n                    "absUsedCapacity": "[]"\n                },\n                "queues": null,\n                "properties": {}\n            }\n        ],\n        "properties": {}\n    }\n}\n')),(0,o.kt)("h2",{id:"applications"},"Applications"),(0,o.kt)("h3",{id:"queue-applications"},"Queue applications"),(0,o.kt)("p",null,"Fetch all Applications for the given Partition Queue combination and displays general information about the applications like used resources, queue name, submission time and allocations."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/partition/{partitioName}/queue/{queueName}/applications")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-3"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"In the example below there are three allocations belonging to two applications. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "applicationID": "application-0001",\n        "usedResource": "[memory:4000 vcore:4000]",\n        "partition": "[mycluster]default",\n        "queueName": "root.default",\n        "submissionTime": 1595939756253216000,\n        "allocations": [\n            {\n                "allocationKey": "deb12221-6b56-4fe9-87db-ebfadce9aa20",\n                "allocationTags": null,\n                "uuid": "9af35d44-2d6f-40d1-b51d-758859e6b8a8",\n                "resource": "[memory:4000 vcore:4000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0001",\n                "applicationId": "application-0002",\n                "partition": "default"\n            }\n        ],\n        "applicationState": "Running"\n    },\n    {\n        "applicationID": "application-0002",\n        "usedResource": "[memory:4000 vcore:4000]",\n        "partition": "[mycluster]default",\n        "queueName": "root.default",\n        "submissionTime": 1595939756253460000,\n        "allocations": [\n            {\n                "allocationKey": "54e5d77b-f4c3-4607-8038-03c9499dd99d",\n                "allocationTags": null,\n                "uuid": "08033f9a-4699-403c-9204-6333856b41bd",\n                "resource": "[memory:2000 vcore:2000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0001",\n                "applicationId": "application-0002",\n                "partition": "default"\n            },\n            {\n                "allocationKey": "af3bd2f3-31c5-42dd-8f3f-c2298ebdec81",\n                "allocationTags": null,\n                "uuid": "96beeb45-5ed2-4c19-9a83-2ac807637b3b",\n                "resource": "[memory:2000 vcore:2000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0002",\n                "applicationId": "application-0002",\n                "partition": "default"\n            }\n        ],\n        "applicationState": "Running"\n    }\n]\n')),(0,o.kt)("h3",{id:"error-response-2"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"400 Bad Request")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 400,\n    "message": "Partition is missing in URL path. Please check the usage documentation",\n    "description": "Partition is missing in URL path. Please check the usage documentation"\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h3",{id:"all-applications"},"All applications"),(0,o.kt)("p",null,"Fetch all Applications across different Partitions and displays general information about the applications like used resources, queue name, submission time and allocations."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Status")," : Deprecated since v0.12.1, replaced by ",(0,o.kt)("a",{parentName:"p",href:"#queue-applications"},"Queue Applications")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/apps")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Query Params")," : "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"queue=<fully qualified queue name",">")),(0,o.kt)("p",null,'The fully qualified queue name used to filter the applications that run within the given queue. For example, "/ws/v1/apps?queue=root.default" returns the applications running in "root.default" queue.'),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-4"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"In the example below there are three allocations belonging to two applications. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "applicationID": "application-0002",\n        "usedResource": "[memory:4000 vcore:4000]",\n        "partition": "[mycluster]default",\n        "queueName": "root.default",\n        "submissionTime": 1595939756253216000,\n        "allocations": [\n            {\n                "allocationKey": "deb12221-6b56-4fe9-87db-ebfadce9aa20",\n                "allocationTags": null,\n                "uuid": "9af35d44-2d6f-40d1-b51d-758859e6b8a8",\n                "resource": "[memory:4000 vcore:4000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0001",\n                "applicationId": "application-0002",\n                "partition": "default"\n            }\n        ],\n        "applicationState": "Running"\n    },\n    {\n        "applicationID": "application-0001",\n        "usedResource": "[memory:4000 vcore:4000]",\n        "partition": "[mycluster]default",\n        "queueName": "root.default",\n        "submissionTime": 1595939756253460000,\n        "allocations": [\n            {\n                "allocationKey": "54e5d77b-f4c3-4607-8038-03c9499dd99d",\n                "allocationTags": null,\n                "uuid": "08033f9a-4699-403c-9204-6333856b41bd",\n                "resource": "[memory:2000 vcore:2000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0001",\n                "applicationId": "application-0001",\n                "partition": "default"\n            },\n            {\n                "allocationKey": "af3bd2f3-31c5-42dd-8f3f-c2298ebdec81",\n                "allocationTags": null,\n                "uuid": "96beeb45-5ed2-4c19-9a83-2ac807637b3b",\n                "resource": "[memory:2000 vcore:2000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0002",\n                "applicationId": "application-0001",\n                "partition": "default"\n            }\n        ],\n        "applicationState": "Running"\n    }\n]\n')),(0,o.kt)("h2",{id:"nodes"},"Nodes"),(0,o.kt)("h3",{id:"partition-nodes"},"Partition nodes"),(0,o.kt)("p",null,"Fetch all Nodes associated with given Partition and displays general information about the nodes managed by YuniKorn.\nNode details include host and rack name, capacity, resources and allocations."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/partition/{partitionName}/nodes")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-5"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"Here you can see an example response from a 2-node cluster having 3 allocations."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "nodeID": "node-0001",\n        "hostName": "",\n        "rackName": "",\n        "capacity": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:14577 pods:110 vcore:10000]",\n        "allocated": "[memory:6000 vcore:6000]",\n        "occupied": "[memory:154 vcore:750]",\n        "available": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:6423 pods:110 vcore:1250]",\n        "allocations": [\n            {\n                "allocationKey": "54e5d77b-f4c3-4607-8038-03c9499dd99d",\n                "allocationTags": null,\n                "uuid": "08033f9a-4699-403c-9204-6333856b41bd",\n                "resource": "[memory:2000 vcore:2000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0001",\n                "applicationId": "application-0001",\n                "partition": "default"\n            },\n            {\n                "allocationKey": "deb12221-6b56-4fe9-87db-ebfadce9aa20",\n                "allocationTags": null,\n                "uuid": "9af35d44-2d6f-40d1-b51d-758859e6b8a8",\n                "resource": "[memory:4000 vcore:4000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0001",\n                "applicationId": "application-0002",\n                "partition": "default"\n            }\n        ],\n        "schedulable": true\n    },\n    {\n        "nodeID": "node-0002",\n        "hostName": "",\n        "rackName": "",\n        "capacity": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:14577 pods:110 vcore:10000]",\n        "allocated": "[memory:2000 vcore:2000]",\n        "occupied": "[memory:154 vcore:750]",\n        "available": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:6423 pods:110 vcore:1250]",\n        "allocations": [\n            {\n                "allocationKey": "af3bd2f3-31c5-42dd-8f3f-c2298ebdec81",\n                "allocationTags": null,\n                "uuid": "96beeb45-5ed2-4c19-9a83-2ac807637b3b",\n                "resource": "[memory:2000 vcore:2000]",\n                "priority": "<nil>",\n                "queueName": "root.default",\n                "nodeId": "node-0002",\n                "applicationId": "application-0001",\n                "partition": "default"\n            }\n        ],\n        "schedulable": true\n    }\n]\n')),(0,o.kt)("h3",{id:"error-response-3"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"400 Bad Request")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 400,\n    "message": "Partition is missing in URL path. Please check the usage documentation",\n    "description": "Partition is missing in URL path. Please check the usage documentation"\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h3",{id:"all-nodes"},"All nodes"),(0,o.kt)("p",null,"Fetch all Nodes acrosss different Partitions and displays general information about the nodes managed by YuniKorn.\nNode details include host and rack name, capacity, resources and allocations."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Status")," : Deprecated since v0.12.1, replaced by ",(0,o.kt)("a",{parentName:"p",href:"#partition-nodes"},"Partition Nodes")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/nodes")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-6"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"Here you can see an example response from a 2-node cluster having 3 allocations."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "partitionName": "[mycluster]default",\n        "nodesInfo": [\n            {\n                "nodeID": "node-0001",\n                "hostName": "",\n                "rackName": "",\n                "capacity": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:14577 pods:110 vcore:10000]",\n                "allocated": "[memory:6000 vcore:6000]",\n                "occupied": "[memory:154 vcore:750]",\n                "available": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:6423 pods:110 vcore:1250]",\n                "allocations": [\n                    {\n                        "allocationKey": "54e5d77b-f4c3-4607-8038-03c9499dd99d",\n                        "allocationTags": null,\n                        "uuid": "08033f9a-4699-403c-9204-6333856b41bd",\n                        "resource": "[memory:2000 vcore:2000]",\n                        "priority": "<nil>",\n                        "queueName": "root.default",\n                        "nodeId": "node-0001",\n                        "applicationId": "application-0001",\n                        "partition": "default"\n                    },\n                    {\n                        "allocationKey": "deb12221-6b56-4fe9-87db-ebfadce9aa20",\n                        "allocationTags": null,\n                        "uuid": "9af35d44-2d6f-40d1-b51d-758859e6b8a8",\n                        "resource": "[memory:4000 vcore:4000]",\n                        "priority": "<nil>",\n                        "queueName": "root.default",\n                        "nodeId": "node-0001",\n                        "applicationId": "application-0002",\n                        "partition": "default"\n                    }\n                ],\n                "schedulable": true\n            },\n            {\n                "nodeID": "node-0002",\n                "hostName": "",\n                "rackName": "",\n                "capacity": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:14577 pods:110 vcore:10000]",\n                "allocated": "[memory:2000 vcore:2000]",\n                "occupied": "[memory:154 vcore:750]",\n                "available": "[ephemeral-storage:75850798569 hugepages-1Gi:0 hugepages-2Mi:0 memory:6423 pods:110 vcore:1250]",\n                "allocations": [\n                    {\n                        "allocationKey": "af3bd2f3-31c5-42dd-8f3f-c2298ebdec81",\n                        "allocationTags": null,\n                        "uuid": "96beeb45-5ed2-4c19-9a83-2ac807637b3b",\n                        "resource": "[memory:2000 vcore:2000]",\n                        "priority": "<nil>",\n                        "queueName": "root.default",\n                        "nodeId": "node-0002",\n                        "applicationId": "application-0001",\n                        "partition": "default"\n                    }\n                ],\n                "schedulable": true\n            }\n        ]\n    }\n]\n')),(0,o.kt)("h2",{id:"nodes-utilization"},"Nodes utilization"),(0,o.kt)("p",null,"Shows how nodes are distributed with regarding the utilization"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/nodes/utilization")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},'[\n    {\n     partition: default,\n     utilization: [ {\n        type: "cpu",\n        total: 100,\n        used: 50,\n        usage: 50%\n      },\n      {\n         type: "memory",\n         total: 1000,\n         used: 500,\n         usage: 50%\n      }\n     ]\n    }, \n    ...\n]\n')),(0,o.kt)("h2",{id:"goroutines-info"},"Goroutines info"),(0,o.kt)("p",null,"Dumps the stack traces of the currently running goroutines."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/stack")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-7"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"goroutine 356 [running\n]:\ngithub.com/apache/incubator-yunikorn-core/pkg/webservice.getStackInfo.func1(0x30a0060,\n0xc003e900e0,\n0x2)\n    /yunikorn/go/pkg/mod/github.com/apache/incubator-yunikorn-core@v0.0.0-20200717041747-f3e1c760c714/pkg/webservice/handlers.go: 41 +0xab\ngithub.com/apache/incubator-yunikorn-core/pkg/webservice.getStackInfo(0x30a0060,\n0xc003e900e0,\n0xc00029ba00)\n    /yunikorn/go/pkg/mod/github.com/apache/incubator-yunikorn-core@v0.0.0-20200717041747-f3e1c760c714/pkg/webservice/handlers.go: 48 +0x71\nnet/http.HandlerFunc.ServeHTTP(0x2df0e10,\n0x30a0060,\n0xc003e900e0,\n0xc00029ba00)\n    /usr/local/go/src/net/http/server.go: 1995 +0x52\ngithub.com/apache/incubator-yunikorn-core/pkg/webservice.Logger.func1(0x30a0060,\n0xc003e900e0,\n0xc00029ba00)\n    /yunikorn/go/pkg/mod/github.com/apache/incubator-yunikorn-core@v0.0.0-20200717041747-f3e1c760c714/pkg/webservice/webservice.go: 65 +0xd4\nnet/http.HandlerFunc.ServeHTTP(0xc00003a570,\n0x30a0060,\n0xc003e900e0,\n0xc00029ba00)\n    /usr/local/go/src/net/http/server.go: 1995 +0x52\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc00029cb40,\n0x30a0060,\n0xc003e900e0,\n0xc0063fee00)\n    /yunikorn/go/pkg/mod/github.com/gorilla/mux@v1.7.3/mux.go: 212 +0x140\nnet/http.serverHandler.ServeHTTP(0xc0000df520,\n0x30a0060,\n0xc003e900e0,\n0xc0063fee00)\n    /usr/local/go/src/net/http/server.go: 2774 +0xcf\nnet/http.(*conn).serve(0xc0000eab40,\n0x30a61a0,\n0xc003b74000)\n    /usr/local/go/src/net/http/server.go: 1878 +0x812\ncreated by net/http.(*Server).Serve\n    /usr/local/go/src/net/http/server.go: 2884 +0x4c5\n\ngoroutine 1 [chan receive,\n    26 minutes\n]:\nmain.main()\n    /yunikorn/pkg/shim/main.go: 52 +0x67a\n\ngoroutine 19 [syscall,\n    26 minutes\n]:\nos/signal.signal_recv(0x1096f91)\n    /usr/local/go/src/runtime/sigqueue.go: 139 +0x9f\nos/signal.loop()\n    /usr/local/go/src/os/signal/signal_unix.go: 23 +0x30\ncreated by os/signal.init.0\n    /usr/local/go/src/os/signal/signal_unix.go: 29 +0x4f\n\n...\n")),(0,o.kt)("h3",{id:"error-response-4"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h2",{id:"metrics"},"Metrics"),(0,o.kt)("p",null,"Endpoint to retrieve metrics from the Prometheus server.\nThe metrics are dumped with help messages and type information."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/metrics")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-8"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},'# HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.\n# TYPE go_gc_duration_seconds summary\ngo_gc_duration_seconds{quantile="0"} 2.567e-05\ngo_gc_duration_seconds{quantile="0.25"} 3.5727e-05\ngo_gc_duration_seconds{quantile="0.5"} 4.5144e-05\ngo_gc_duration_seconds{quantile="0.75"} 6.0024e-05\ngo_gc_duration_seconds{quantile="1"} 0.00022528\ngo_gc_duration_seconds_sum 0.021561648\ngo_gc_duration_seconds_count 436\n# HELP go_goroutines Number of goroutines that currently exist.\n# TYPE go_goroutines gauge\ngo_goroutines 82\n# HELP go_info Information about the Go environment.\n# TYPE go_info gauge\ngo_info{version="go1.12.17"} 1\n# HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.\n# TYPE go_memstats_alloc_bytes gauge\ngo_memstats_alloc_bytes 9.6866248e+07\n\n...\n\n# HELP yunikorn_scheduler_vcore_nodes_usage Nodes resource usage, by resource name.\n# TYPE yunikorn_scheduler_vcore_nodes_usage gauge\nyunikorn_scheduler_vcore_nodes_usage{range="(10%, 20%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(20%,30%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(30%,40%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(40%,50%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(50%,60%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(60%,70%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(70%,80%]"} 1\nyunikorn_scheduler_vcore_nodes_usage{range="(80%,90%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="(90%,100%]"} 0\nyunikorn_scheduler_vcore_nodes_usage{range="[0,10%]"} 0\n')),(0,o.kt)("h2",{id:"configuration-validation"},"Configuration validation"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/validate-conf")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"POST")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-9"},"Success response"),(0,o.kt)("p",null,"Regardless whether the configuration is allowed or not if the server was able to process the request, it will yield a 200 HTTP status code."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("h4",{id:"allowed-configuration"},"Allowed configuration"),(0,o.kt)("p",null,"Sending the following simple configuration yields an accept"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"partitions:\n  - name: default\n    queues:\n      - name: root\n        queues:\n          - name: test\n")),(0,o.kt)("p",null,"Reponse"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "allowed": true,\n    "reason": ""\n}\n')),(0,o.kt)("h4",{id:"disallowed-configuration"},"Disallowed configuration"),(0,o.kt)("p",null,'The following configuration is not allowed due to the "wrong_text" field put into the yaml file.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"partitions:\n  - name: default\n    queues:\n      - name: root\n        queues:\n          - name: test\n  - wrong_text\n")),(0,o.kt)("p",null,"Reponse"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "allowed": false,\n    "reason": "yaml: unmarshal errors:\\n  line 7: cannot unmarshal !!str `wrong_text` into configs.PartitionConfig"\n}\n')),(0,o.kt)("h2",{id:"configuration-create"},"Configuration Create"),(0,o.kt)("p",null,"Endpoint to create scheduler configuration, but currently limited for configuration validation purpose alone"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/config")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"POST")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Query Params")," : "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"dry_run")),(0,o.kt)("p",null,"Mandatory Parameter. Only dry_run=1 is allowed and can be used for configuration validation only, not for the actual config creation."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-10"},"Success response"),(0,o.kt)("p",null,"Regardless whether the configuration is allowed or not if the server was able to process the request, it will yield a 200 HTTP status code."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("h4",{id:"allowed-configuration-1"},"Allowed configuration"),(0,o.kt)("p",null,"Sending the following simple configuration yields an accept"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"partitions:\n  - name: default\n    queues:\n      - name: root\n        queues:\n          - name: test\n")),(0,o.kt)("p",null,"Response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "allowed": true,\n    "reason": ""\n}\n')),(0,o.kt)("h4",{id:"disallowed-configuration-1"},"Disallowed configuration"),(0,o.kt)("p",null,'The following configuration is not allowed due to the "wrong_text" field put into the yaml file.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"partitions:\n  - name: default\n    queues:\n      - name: root\n        queues:\n          - name: test\n  - wrong_text\n")),(0,o.kt)("p",null,"Response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "allowed": false,\n    "reason": "yaml: unmarshal errors:\\n  line 7: cannot unmarshal !!str `wrong_text` into configs.PartitionConfig"\n}\n')),(0,o.kt)("h3",{id:"error-response-5"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"400 Bad Request")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 400,\n    "message": "Dry run param is missing. Please check the usage documentation",\n    "description": "Dry run param is missing. Please check the usage documentation"\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"Endpoint to retrieve the current scheduler configuration"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/config")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-11"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content example")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"partitions:\n- name: default\n  queues:\n  - name: root\n    parent: true\n    submitacl: '*'\n  placementrules:\n  - name: tag\n    create: true\n    value: namespace\nchecksum: D75996C07D5167F41B33E27CCFAEF1D5C55BE3C00EE6526A7ABDF8435DB4078E\n")),(0,o.kt)("h2",{id:"configuration-update"},"Configuration update"),(0,o.kt)("p",null,"Endpoint to override scheduler configuration. "),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/config")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"PUT")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-12"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content example")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"partitions:\n  -\n    name: default\n    placementrules:\n      - name: tag\n        value: namespace\n        create: true\n    queues:\n      - name: root\n        submitacl: '*'\n        properties:\n          application.sort.policy: stateaware\nchecksum: BAB3D76402827EABE62FA7E4C6BCF4D8DD9552834561B6B660EF37FED9299791\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note:")," Updates must use a current running configuration as the base.\nThe base configuration is the configuration version that was retrieved earlier via a GET request and updated by the user.\nThe update request must contain the checksum of the ",(0,o.kt)("em",{parentName:"p"},"base")," configuration.\nIf the checksum provided in the update request differs from the currently running configuration checksum the update will be rejected."),(0,o.kt)("h3",{id:"failure-response"},"Failure response"),(0,o.kt)("p",null,"The configuration update can fail due to different reasons such as:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"invalid configuration,"),(0,o.kt)("li",{parentName:"ul"},"incorrect base checksum.")),(0,o.kt)("p",null,"In each case the transaction will be rejected, and the proper\nerror message will be returned as a response."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"409 Conflict")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Message example")," :  root queue must not have resource limits set"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content example")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'partitions:\n  -\n    name: default\n    placementrules:\n      - name: tag\n        value: namespace\n        create: true\n    queues:\n      - name: root\n        submitacl: \'*\'\n        resources:\n          guaranteed:\n            memory: "512"\n            vcore: "1"\n        properties:\n          application.sort.policy: stateaware\nchecksum: BAB3D76402827EABE62FA7E4C6BCF4D8DD9552834561B6B660EF37FED9299791\n')),(0,o.kt)("h3",{id:"error-response-6"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h2",{id:"application-history"},"Application history"),(0,o.kt)("p",null,"Endpoint to retrieve historical data about the number of total applications by timestamp."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/history/apps")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-13"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "timestamp": 1595939966153460000,\n        "totalApplications": "1"\n    },\n    {\n        "timestamp": 1595940026152892000,\n        "totalApplications": "1"\n    },\n    {\n        "timestamp": 1595940086153799000,\n        "totalApplications": "2"\n    },\n    {\n        "timestamp": 1595940146154497000,\n        "totalApplications": "2"\n    },\n    {\n        "timestamp": 1595940206155187000,\n        "totalApplications": "2"\n    }\n]\n')),(0,o.kt)("h3",{id:"error-response-7"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h2",{id:"container-history"},"Container history"),(0,o.kt)("p",null,"Endpoint to retrieve historical data about the number of total containers by timestamp."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/history/containers")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-14"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "timestamp": 1595939966153460000,\n        "totalContainers": "1"\n    },\n    {\n        "timestamp": 1595940026152892000,\n        "totalContainers": "1"\n    },\n    {\n        "timestamp": 1595940086153799000,\n        "totalContainers": "3"\n    },\n    {\n        "timestamp": 1595940146154497000,\n        "totalContainers": "3"\n    },\n    {\n        "timestamp": 1595940206155187000,\n        "totalContainers": "3"\n    }\n]\n')),(0,o.kt)("h3",{id:"error-response-8"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 500,\n    "message": "system error message. for example, json: invalid UTF-8 in string: ..",\n    "description": "system error message. for example, json: invalid UTF-8 in string: .."\n}\n')),(0,o.kt)("h2",{id:"endpoint-healthcheck"},"Endpoint healthcheck"),(0,o.kt)("p",null,"Endpoint to retrieve historical data about critical logs, negative resource on node/cluster/app, ..."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/scheduler/healthcheck")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-15"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Healthy": true,\n    "HealthChecks": [\n        {\n            "Name": "Scheduling errors",\n            "Succeeded": true,\n            "Description": "Check for scheduling error entries in metrics",\n            "DiagnosisMessage": "There were 0 scheduling errors logged in the metrics"\n        },\n        {\n            "Name": "Failed nodes",\n            "Succeeded": true,\n            "Description": "Check for failed nodes entries in metrics",\n            "DiagnosisMessage": "There were 0 failed nodes logged in the metrics"\n        },\n        {\n            "Name": "Negative resources",\n            "Succeeded": true,\n            "Description": "Check for negative resources in the partitions",\n            "DiagnosisMessage": "Partitions with negative resources: []"\n        },\n        {\n            "Name": "Negative resources",\n            "Succeeded": true,\n            "Description": "Check for negative resources in the nodes",\n            "DiagnosisMessage": "Nodes with negative resources: []"\n        },\n        {\n            "Name": "Consistency of data",\n            "Succeeded": true,\n            "Description": "Check if a node\'s allocated resource <= total resource of the node",\n            "DiagnosisMessage": "Nodes with inconsistent data: []"\n        },\n        {\n            "Name": "Consistency of data",\n            "Succeeded": true,\n            "Description": "Check if total partition resource == sum of the node resources from the partition",\n            "DiagnosisMessage": "Partitions with inconsistent data: []"\n        },\n        {\n            "Name": "Consistency of data",\n            "Succeeded": true,\n            "Description": "Check if node total resource = allocated resource + occupied resource + available resource",\n            "DiagnosisMessage": "Nodes with inconsistent data: []"\n        },\n        {\n            "Name": "Consistency of data",\n            "Succeeded": true,\n            "Description": "Check if node capacity >= allocated resources on the node",\n            "DiagnosisMessage": "Nodes with inconsistent data: []"\n        },\n        {\n            "Name": "Reservation check",\n            "Succeeded": true,\n            "Description": "Check the reservation nr compared to the number of nodes",\n            "DiagnosisMessage": "Reservation/node nr ratio: [0.000000]"\n        }\n    ]\n}\n')),(0,o.kt)("h2",{id:"retrieve-full-state-dump"},"Retrieve full state dump"),(0,o.kt)("p",null,"Endpoint to retrieve the following information in a single response:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"List of partitions"),(0,o.kt)("li",{parentName:"ul"},"List of applications (running and completed)"),(0,o.kt)("li",{parentName:"ul"},"Application history"),(0,o.kt)("li",{parentName:"ul"},"Nodes"),(0,o.kt)("li",{parentName:"ul"},"Utilization of nodes"),(0,o.kt)("li",{parentName:"ul"},"Generic cluster information"),(0,o.kt)("li",{parentName:"ul"},"Cluster utilization"),(0,o.kt)("li",{parentName:"ul"},"Container history"),(0,o.kt)("li",{parentName:"ul"},"Queues")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/fullstatedump")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"GET")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("h3",{id:"success-response-16"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("p",null,"The output of this REST query can be rather big and it is a combination of those which have already been demonstrated."),(0,o.kt)("h3",{id:"failure-response-1"},"Failure response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code"),": ",(0,o.kt)("inlineCode",{parentName:"p"},"500 Internal Server Error")),(0,o.kt)("h2",{id:"enable-or-disable-periodic-state-dump-to-an-external-file-inside-the-container-which-runs-yunikorn"},"Enable or disable periodic state dump to an external file inside the container which runs Yunikorn"),(0,o.kt)("p",null,"Endpoint to enable a state dump to be written periodically. By default, it is 60 seconds. The output goes to a file called ",(0,o.kt)("inlineCode",{parentName:"p"},"yunikorn-state.txt"),". In the current version, the file is located in the current working directory of Yunikorn and it is not configurable."),(0,o.kt)("p",null,"Trying to enable or disable this feature more than once in a row results in an error."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"URL")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"/ws/v1/periodicstatedump/{switch}/{periodSeconds}")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Method")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"PUT")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Auth required")," : NO"),(0,o.kt)("p",null,"The value ",(0,o.kt)("inlineCode",{parentName:"p"},"{switch}")," can be either ",(0,o.kt)("inlineCode",{parentName:"p"},"disable")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"enable"),". The ",(0,o.kt)("inlineCode",{parentName:"p"},"{periodSeconds}")," defines how often state snapshots should be taken. It is expected to be a positive integer and only interpreted in case of ",(0,o.kt)("inlineCode",{parentName:"p"},"enable"),"."),(0,o.kt)("h3",{id:"success-response-17"},"Success response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"200 OK")),(0,o.kt)("h3",{id:"error-response-9"},"Error response"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code"),": ",(0,o.kt)("inlineCode",{parentName:"p"},"400 Bad Request")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Content examples")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "status_code": 400,\n    "message": "required parameter enabled/disabled is missing",\n    "description": "required parameter enabled/disabled is missing"\n}\n')))}g.isMDXComponent=!0}}]);
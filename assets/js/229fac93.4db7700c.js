"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[37586],{99308:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>h});var s=n(13274),i=n(1780);const o={id:"how_to_contribute",title:"How To Contribute"},r="How To Contribute",a={type:"mdx",permalink:"/community/how_to_contribute",source:"@site/src/pages/community/how_to_contribute.md",title:"How To Contribute",description:"\x3c!--",frontMatter:{id:"how_to_contribute",title:"How To Contribute"},unlisted:!1},l={},h=[{value:"Jira Signup",id:"jira-signup",level:2},{value:"Find an issue",id:"find-an-issue",level:2},{value:"Fix an issue",id:"fix-an-issue",level:2},{value:"Changes that modify multiple repositories",id:"changes-that-modify-multiple-repositories",level:2},{value:"Documentation updates",id:"documentation-updates",level:2},{value:"Create a pull request",id:"create-a-pull-request",level:2},{value:"Committing a change",id:"committing-a-change",level:2},{value:"Still got questions?",id:"still-got-questions",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"how-to-contribute",children:"How To Contribute"}),"\n",(0,s.jsx)(t.p,{children:"YuniKorn uses:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"JIRA for issue tracking."}),"\n",(0,s.jsx)(t.li,{children:"GitHub Pull Requests to manage code review and the change itself."}),"\n",(0,s.jsx)(t.li,{children:"Markdown for documentation, versioned and stored in the website repository."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"jira-signup",children:"Jira Signup"}),"\n",(0,s.jsxs)(t.p,{children:["In November 2022, due to an influx of false Jira accounts creating a flood of spam tickets, Apache Infra ended public signups to ASF Jira accounts.\nThis ",(0,s.jsx)(t.a,{href:"https://infra.apache.org/blog/jira-public-signup-disabled.html",children:"blog post"})," discusses the decision.\nIf you want to open a Jira ticket for YuniKorn and do not have an ASF Jira account, create an account via self-service."]}),"\n",(0,s.jsx)(t.p,{children:"Steps are following:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Click ",(0,s.jsx)(t.a,{href:"https://selfserve.apache.org/jira-account.html",children:"request a Jira account"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Choose ASF project with ",(0,s.jsx)(t.strong,{children:"yunikorn"})," and fill in the fields."]}),"\n",(0,s.jsx)(t.li,{children:"The Yunikorn PMC reviews and approves the request."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"find-an-issue",children:"Find an issue"}),"\n",(0,s.jsxs)(t.p,{children:["We use JIRA issues to track bugs for this project.\nFind an issue that you would like to work on, or file a new one if you have discovered a new issue.\nFor help with reporting issues look at the ",(0,s.jsx)(t.a,{href:"/community/reporting_issues",children:"how to report an issue"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["The easiest way to get started working with the code base is to pick up a really easy\nJIRA and work on that. This will help you get familiar with the code base, build system,\nreview process, etc. We flag these starter bugs ",(0,s.jsx)(t.a,{href:"https://issues.apache.org/jira/issues/?jql=project%3DYUNIKORN%20AND%20status%3DOpen%20AND%20labels%3Dnewbie",children:"here"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["If nobody is working on an existing issue, assign it to yourself only if you intend to work on it shortly.\nIf you pick up an existing JIRA look for pull requests that are linked to the JIRA ticket.\nSomeone might be already working on it and not assigned the ticket.\nJIRAs that have a pull requests linked will have the label ",(0,s.jsx)(t.code,{children:"pull-request-available"})," and a link to the pull request can be found under issue links."]}),"\n",(0,s.jsx)(t.p,{children:"For anything that is more than a trivial change, like a typo or one line code change, it\u2019s a good idea to discuss your intended approach on the issue.\nYou are much more likely to have your patch reviewed and committed if you\u2019ve already got buy-in from the YuniKorn community before you start writing the fix."}),"\n",(0,s.jsx)(t.p,{children:"If you cannot assign the JIRA to yourself ask the community to help assign it and add you to the contributors list in JIRA."}),"\n",(0,s.jsx)(t.h2,{id:"fix-an-issue",children:"Fix an issue"}),"\n",(0,s.jsxs)(t.p,{children:["Fixes or improvement must be created on the ",(0,s.jsx)(t.code,{children:"master"})," branch.\nFork the relevant YuniKorn project into your own project and checkout the ",(0,s.jsx)(t.code,{children:"master"})," branch.\nIf the same issue exist in an earlier release branch it can be back ported after the fix has been added to master.\nMake sure that you have an up-to-date code revision checked out before you start. Use ",(0,s.jsx)(t.code,{children:"git status"})," to see if you are up-to-date.\nCreate a branch to work on, a good name to use is the JIRA ID you are working on."]}),"\n",(0,s.jsx)(t.p,{children:"Now start coding! As you are writing your patch, please keep the following things in mind:"}),"\n",(0,s.jsx)(t.p,{children:"Include tests with your patch.\nIf your patch adds a feature or fixes a bug and does not include tests, it will generally not be accepted.\nIf you are unsure how to write tests for a particular component, please ask on the JIRA for guidance."}),"\n",(0,s.jsx)(t.p,{children:"Please keep your patch narrowly targeted to the problem described by the JIRA.\nIt\u2019s better for everyone if we maintain discipline about the scope of each patch.\nIn general, if you find a bug while working on a specific feature, file a JIRA for the bug, check if you can assign it to yourself and fix it independently of the feature.\nThis helps us to differentiate between bug fixes and features and allows us to build stable maintenance releases."}),"\n",(0,s.jsxs)(t.p,{children:["Make sure you have observed the recommendations in the ",(0,s.jsx)(t.a,{href:"/community/coding_guidelines",children:"coding guidelines"}),".\nBefore you commit your changes and create a pull request based on your changes you should run the code checks.\nThese same checks are run as part of the pull request workflow.\nThe pull request workflow performs the following checks:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Apache license check: ",(0,s.jsx)(t.code,{children:"make license-check"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Go lint check: ",(0,s.jsx)(t.code,{children:"make lint"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Full unit test suite: ",(0,s.jsx)(t.code,{children:"make test"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"These three checks should pass locally before opening a pull request.\nAs part of the pull request workflow all checks must pass before the change is committed.\nFor first time contributors to a repository the automated pull request workflow must be approved by a committer.\nOnce the workflow has run and has given a pass (a +1 vote) a committer will review the patch."}),"\n",(0,s.jsxs)(t.p,{children:["As part of the Kubernetes shim there is also a set of tests defined called the ",(0,s.jsx)(t.em,{children:"end to end"})," tests.\nThese tests are more complex to execute as they require some extra tools to be installed.\nExecution, and a pass, of the tests is strongly recommended for changes to the Kubernetes shim repository.\nThey can be executed locally via ",(0,s.jsx)(t.code,{children:"yunikorn-k8shim/scripts/run-e2e-tests.sh"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Finally, please write a good, clear commit message, with a short, descriptive title.\nThe descriptive title must start with the JIRA ID you are working on.\nAn example is: ",(0,s.jsx)(t.code,{children:"[YUNIKORN-2] Support Gang Scheduling"}),"\nThe body of the commit message is used to describe the change made.\nThe whole commit message will be used to pre-fill the pull request information.\nThe body of the first commit message will be added to the PR Template.\nThe JIRA ID in the message will automatically link the pull request and the JIRA this is an essential part of tracking JIRA progress."]}),"\n",(0,s.jsx)(t.h2,{id:"changes-that-modify-multiple-repositories",children:"Changes that modify multiple repositories"}),"\n",(0,s.jsx)(t.p,{children:"Apache YuniKorn consists of a number of repositories. Certain bug fixes or features will require modification in 2 or more repositories.\nThe dependencies are only relevant for the code repositories."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"repository"}),(0,s.jsx)(t.th,{children:"depends on"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"yunikorn-core"}),(0,s.jsx)(t.td,{children:"yunikorn-scheduler-interface"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"yunikorn-k8shim"}),(0,s.jsx)(t.td,{children:"yunikorn-scheduler-interface, yunikorn-core"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"yunikorn-scheduler-interface"}),(0,s.jsx)(t.td,{children:"none"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"yunikorn-web"}),(0,s.jsx)(t.td,{children:"yunikorn-core"})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"The dependency between the web UI and the core code is limited to the exposed REST API.\nNot all REST API end points are used in the web UI. Manually testing the web UI against the new REST API is required before approving and committing changes.\nAs a general rule there is an impact on the web UI if a change in the REST API removes or updates existing fields or completely removes existing end points.\nAdditional end points or fields should not require a web UI update but still require manual testing."}),"\n",(0,s.jsxs)(t.p,{children:["The scheduler interface, core and K8shim have a dependency based on the ",(0,s.jsx)(t.a,{href:"https://go.dev/blog/using-go-modules",children:"Go modules"})," that they import."]}),"\n",(0,s.jsxs)(t.p,{children:["We follow the version numbering as described in the ",(0,s.jsx)(t.a,{href:"https://go.dev/doc/modules/version-numbers",children:"version numbering"})," for go modules.\nThe master branch ",(0,s.jsx)(t.em,{children:"must"})," use a pseudo version.\nSee the ",(0,s.jsx)(t.a,{href:"/docs/next/developer_guide/dependencies",children:"Go module dependencies"})," for updating the pseudo version.\nThe release branches ",(0,s.jsx)(t.em,{children:"must"})," use branch version.\nSee the ",(0,s.jsx)(t.a,{href:"/community/release_procedure#tag-and-update-release-for-version",children:"release procedure"})," on when and how to update the tags and references during the release creation."]}),"\n",(0,s.jsx)(t.h2,{id:"documentation-updates",children:"Documentation updates"}),"\n",(0,s.jsxs)(t.p,{children:["Documentation is published and maintained as part of the website.\nThe process for updating the documentation is the same as for making code changes: file a jira and open a pull-request with the change.\nMultiple versions of the documentation are published on the website.\nChanges are always made against the ",(0,s.jsx)(t.code,{children:"master"})," branch.\nThe versioned documents and sidebars should only be updated to fix errors that cannot wait for a release."]}),"\n",(0,s.jsxs)(t.p,{children:["Images that are part of a documentation page must be located in the ",(0,s.jsx)(t.code,{children:"assets"})," directory as part of the documents, i.e. ",(0,s.jsx)(t.code,{children:"docs/assets"}),".\nAll other images that are used, for instance the homepage and menu, that do not change when or if the documentation is updated/versioned must be located in the ",(0,s.jsx)(t.code,{children:"static/img"})," directory."]}),"\n",(0,s.jsx)(t.p,{children:"The versioned documentation and sidebar are located in:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"versioned_docs: the released version of documentation"}),"\n",(0,s.jsx)(t.li,{children:"versioned_sidebars: the sidebars for the corresponding released documentation"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Normal documentation maintenance must be performed by updating the non versioned documentation.\nNew pages are added by:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"adding a Markdown file"}),"\n",(0,s.jsxs)(t.li,{children:["updating the ",(0,s.jsx)(t.code,{children:"sidebar.js"})," file"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The page file must contain:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"id and title definition (docusaurus syntax)"}),"\n",(0,s.jsx)(t.li,{children:"Apache license"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The id is used by docusaurus to link the page to the specific point in the documentation menu.\nThe title is displayed in the menu."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"---\nid: MyPageID\ntitle: My new documentation page\n---\n"})}),"\n",(0,s.jsx)(t.p,{children:"Pages can be grouped in categories in the sidebar.\nThe category should be represented as directories in the source tree."}),"\n",(0,s.jsx)(t.p,{children:"After making the changes you can build the website locally in development mode with the following command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",metastring:"script",children:"./local-build.sh run\n"})}),"\n",(0,s.jsx)(t.p,{children:"The only requirement is that you have docker installed as the build and server will be run inside a docker container."}),"\n",(0,s.jsx)(t.h2,{id:"create-a-pull-request",children:"Create a pull request"}),"\n",(0,s.jsxs)(t.p,{children:["Please create a pull request on github with your patch.\nSee ",(0,s.jsx)(t.a,{href:"https://help.github.com/articles/using-pull-requests/",children:"opening a pull request"})," for all the details."]}),"\n",(0,s.jsxs)(t.p,{children:["Recommendation is to use a fork of the repository and create a branch in your fork.\nUse the GitHub UI to create a PR using the ",(0,s.jsx)(t.code,{children:"compare across forks"})," option.\nIn most cases the GitHub UI, after a short delay, will provide you the option to create a PR when a commit is detected on a forked repository."]}),"\n",(0,s.jsxs)(t.p,{children:["The pull request description must include the JIRA reference that you are working on.\nIf you set the commit message as described above the pull request will automatically pick it up.\nIf you did not do that you can amend the description of the pull request to add the JIRA ID.\nFor example a pull request linked to ",(0,s.jsx)(t.a,{href:"https://issues.apache.org/jira/browse/YUNIKORN-2",children:"YUNIKORN-2"})," should have a description like:\n",(0,s.jsx)(t.code,{children:"[YUNIKORN-2] Support Gang Scheduling"})]}),"\n",(0,s.jsx)(t.h2,{id:"committing-a-change",children:"Committing a change"}),"\n",(0,s.jsxs)(t.p,{children:["When a change is approved a committer will commit the change to the ",(0,s.jsx)(t.code,{children:"master"}),' branch of the repository.\nCommits follow the "squash and merge" approach. This squashes all commits for a pull request into one commit which is then merged.']}),"\n",(0,s.jsxs)(t.p,{children:["After committing a change the JIRA associated with the pull request will not be automatically closed.\nThe JIRA status should be resolved manually and the correct ",(0,s.jsx)(t.code,{children:"Fixed Version/s"})," should be set when resolving.\nIf a patch is back ported into a branch the JIRA should show multiple ",(0,s.jsx)(t.code,{children:"Fixed Version/s"}),".\nOne for the upcoming version for the master and one for each branch the fix is ported back to."]}),"\n",(0,s.jsx)(t.p,{children:"There are three options for committing a change:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"use the script (recommended)"}),"\n",(0,s.jsx)(t.li,{children:"manually using the git command line"}),"\n",(0,s.jsx)(t.li,{children:'use the GitHub web UI "squash and merge" button'}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["A ",(0,s.jsx)(t.a,{href:"https://github.com/apache/yunikorn-release/tree/master/tools/merge_pr.sh",children:"simple shell script"})," to help with a squash and merge is part of the release repository.\nThe script handles the checkout, merge and commit message preparation.\nAs part of the merge process conflicts can be resolved by the committer and added to the commit.\nThe commit message is prepared but not finalised. The committer can edit, and cleanup, the message before the commit is made.\nChanges are pushed as the last step of the process.\nAbandoning the process leaves the local system in the same state as it was before the commit process started."]}),"\n",(0,s.jsxs)(t.admonition,{type:"caution",children:[(0,s.jsx)(t.p,{children:"Using the GitHub web UI there is no control over the author or committers details."}),(0,s.jsxs)(t.p,{children:['The committer is always set to "GitHub <',(0,s.jsx)(t.a,{href:"mailto:noreply@github.com",children:"noreply@github.com"}),'>".\nThe user logged into the GitHub web UI and performing the action is not tracked in the commit.\nThe author name is influenced by the GitHub setting "Keep my email addresses private",\nthis can cause author names like "username <',(0,s.jsx)(t.a,{href:"mailto:12345678-username@users.noreply.github.com",children:"12345678-username@users.noreply.github.com"}),'>" to be used.']})]}),"\n",(0,s.jsxs)(t.p,{children:["Commit messages ",(0,s.jsx)(t.strong,{children:"must"})," comply to a simple set of rules:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Subject line is the title of the change formatted as follows: ",(0,s.jsx)(t.code,{children:"[JIRA reference] subject (#PR ID)"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Second line must be empty, separates the subject from the body."}),"\n",(0,s.jsx)(t.li,{children:"The body of the message contains the description of the change."}),"\n",(0,s.jsx)(t.li,{children:"All lines in the commit message should be wrapped at 72 characters."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["For all commits, via the command line or the GitHub web UI, the message body must be reviewed.\nDuring the pull request review process multiple commits could be added and some text that end up in the commit message might be irrelevant.\nText like ",(0,s.jsx)(t.code,{children:"review comment changes"})," or ",(0,s.jsx)(t.code,{children:"fixed unit test"})," do not need to be part of the final commit message."]}),"\n",(0,s.jsxs)(t.p,{children:["The pull request will automatically be marked as ",(0,s.jsx)(t.code,{children:"merged"}),' when the GitHub UI is used.\nTo close the pull request when using the git command line one of the magic phrases can be used in a commit message.\nIncluding one of these "magic words" followed by the pull request ID in the commit summary will automatically close the pull request.\nThe script will automatically add the ',(0,s.jsx)(t.code,{children:"Closes: #PR"})," phrase to the commit message.\nFor more information check this ",(0,s.jsx)(t.a,{href:"https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue",children:"GitHub help page"})," for more magic phrases."]}),"\n",(0,s.jsxs)(t.p,{children:["An example of a pull request committed using the script see PR #329 for the YuniKorn core: ",(0,s.jsx)(t.a,{href:"https://github.com/apache/yunikorn-core/commit/9e151829e14714b0e47b413bd9cecfdff6b44507",children:"PR 329 commit"})]}),"\n",(0,s.jsx)(t.h2,{id:"still-got-questions",children:"Still got questions?"}),"\n",(0,s.jsxs)(t.p,{children:["If you\u2019re not sure about something, try to follow the style of the existing codebase.\nLook at whether there are other examples in the code that do a similar thing.\nFeel free to ask questions on the ",(0,s.jsx)(t.a,{href:"mailto:dev@yunikorn.apache.org",children:"dev@yunikorn.apache.org"})," list as well."]}),"\n",(0,s.jsx)(t.p,{children:"See Also"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"http://www.apache.org/dev/contributors.html",children:"Apache contributor documentation"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"http://www.apache.org/foundation/voting.html",children:"Apache voting documentation"})}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},1780:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var s=n(79474);const i={},o=s.createContext(i);function r(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);
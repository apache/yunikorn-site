---
id: scheduler
title: Scheduler
---

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

## Container
### Total allocation attempt
Total number of attempts to allocate containers.
State of the attempt includes `allocated`, `rejected`, `error`, `released`.

**Metric Type**: `counter`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```json
yunikorn_scheduler_container_allocation_attempt_total{state="allocated"} 0
yunikorn_scheduler_container_allocation_attempt_total{state="error"} 0
yunikorn_scheduler_container_allocation_attempt_total{state="released"} 0
```

## Application
### Total
Total number of applications.
State of the application includes `running`, `failed` and `completed`.

**Metric Type**: `gauge`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`
```
yunikorn_scheduler_application_total{state="running"} 0
```

### Total Submission
Total number of application submissions.
State of the attempt includes `accepted` and `rejected`.

**Metric Type**: `counter`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`
```
yunikorn_scheduler_application_submission_total{result="accepted"} 6
```

## Latency
### Scheduling latency
Latency of the main scheduling routine, in milliseconds.
This metric includes latencies, such as `Node sorting`, `Trynode` and `Trypreemption`. 

**Metric Type**: `histogram`

**Interval**: `millisecond`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```json
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="0.0001"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="0.001"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="0.01"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="0.1"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="1"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="10"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_bucket{le="+Inf"} 0
yunikorn_scheduler_scheduling_latency_milliseconds_sum 0
yunikorn_scheduler_scheduling_latency_milliseconds_count 0
```

### Node sorting
Latencies including `node sorting`, `application sorting` and `queue sorting`, in milliseconds.

**Metric Type**: `histogram`

**Interval**: `millisecond`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```mdx-code-block
<Tabs
  defaultValue="node_sorting"
  values={[
    { label: 'Node sorting', value: 'node_sorting'},
    { label: 'App sorting', value: 'app_sorting'},
    { label: 'Queue sorting', value: 'queue_sorting'},
  ]}>
<TabItem value="app_sorting">

  ```json
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="0.0001"} 5
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="0.001"} 6
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="0.01"} 6
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="0.1"} 6
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="1"} 6
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="10"} 6
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="app",le="+Inf"} 6
  yunikorn_scheduler_node_sorting_latency_milliseconds_sum{level="app"} 0.00026345400000000004
  yunikorn_scheduler_node_sorting_latency_milliseconds_count{level="app"} 6
  ```

</TabItem>
<TabItem value="node_sorting">

  ```json
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="0.0001"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="0.001"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="0.01"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="0.1"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="1"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="10"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="node",le="+Inf"} 3
  yunikorn_scheduler_node_sorting_latency_milliseconds_sum{level="node"} 2.5013999999999998e-05
  yunikorn_scheduler_node_sorting_latency_milliseconds_count{level="node"} 3
  ```

</TabItem>
<TabItem value="queue_sorting">

  ```json
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="0.0001"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="0.001"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="0.01"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="0.1"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="1"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="10"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_bucket{level="queue",le="+Inf"} 9
  yunikorn_scheduler_node_sorting_latency_milliseconds_sum{level="queue"} 4.0093e-05
  yunikorn_scheduler_node_sorting_latency_milliseconds_count{level="queue"} 9
  ```

</TabItem>
</Tabs>

### Trynode
Latency of node condition checks for container allocations, such as placement constraints, in milliseconds.

**Metric Type**: `histogram`

**Interval**: `millisecond`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```json
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="0.0001"} 0
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="0.001"} 0
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="0.01"} 0
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="0.1"} 0
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="1"} 0
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="10"} 0
yunikorn_scheduler_trynode_latency_milliseconds_bucket{le="+Inf"} 0
yunikorn_scheduler_trynode_latency_milliseconds_sum 0
yunikorn_scheduler_trynode_latency_milliseconds_count 0
```

### Trypreemption
Latency of preemption condition checks for container allocations, in milliseconds

**Metric Type**: `histogram`

**Interval**: `millisecond`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```json
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="0.0001"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="0.001"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="0.01"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="0.1"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="1"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="10"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_bucket{le="+Inf"} 0
yunikorn_scheduler_trypreemption_latency_milliseconds_sum 0
yunikorn_scheduler_trypreemption_latency_milliseconds_count 0
```
## Node
### Node
Total number of nodes.
State of the node includes `active` and `failed`.

**Metric Type**: `gauge`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```json
yunikorn_scheduler_node{state="active"} 1
yunikorn_scheduler_node{state="failed"} 0
```

### Total node usage
`yunikorn_scheduler_<resource type>_node_usage_total`
Total resource usage of node, by resource name.

**Metric Type**: `gauge`

**Namespace**: `yunikorn`

**Subsystem**: `scheduler`

```mdx-code-block
<Tabs
  defaultValue="ephemeral_storage"
  values={[
    { label: 'Ephemeral_storage', value: 'ephemeral_storage'},
    { label: 'Memory', value: 'memory'},
    { label: 'Pods', value: 'pods'},
    { label: 'vcore', value: 'vcore'},
  ]}>
<TabItem value="ephemeral_storage">

  ```json
  yunikorn_scheduler_ephemeral_storage_node_usage_total
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(10%, 20%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(20%,30%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(30%,40%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(40%,50%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(50%,60%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(60%,70%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(70%,80%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(80%,90%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="(90%,100%]"} 0
  yunikorn_scheduler_ephemeral_storage_node_usage_total{range="[0,10%]"} 1
  ```

</TabItem>
<TabItem value="memory">

  ```json
  yunikorn_scheduler_memory_node_usage_total
  yunikorn_scheduler_memory_node_usage_total{range="(10%, 20%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(20%,30%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(30%,40%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(40%,50%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(50%,60%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(60%,70%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(70%,80%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(80%,90%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="(90%,100%]"} 0
  yunikorn_scheduler_memory_node_usage_total{range="[0,10%]"} 1
  ```

</TabItem>
<TabItem value="pods">

  ```json
  yunikorn_scheduler_pods_node_usage_total
  yunikorn_scheduler_pods_node_usage_total{range="(10%, 20%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(20%,30%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(30%,40%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(40%,50%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(50%,60%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(60%,70%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(70%,80%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(80%,90%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="(90%,100%]"} 0
  yunikorn_scheduler_pods_node_usage_total{range="[0,10%]"} 1
  ```

</TabItem>
<TabItem value="vcore">

  ```json
  yunikorn_scheduler_vcore_node_usage_total
  yunikorn_scheduler_vcore_node_usage_total{range="(10%, 20%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(20%,30%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(30%,40%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(40%,50%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(50%,60%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(60%,70%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(70%,80%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(80%,90%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="(90%,100%]"} 0
  yunikorn_scheduler_vcore_node_usage_total{range="[0,10%]"} 1
  ```
  
</TabItem>
</Tabs>
```

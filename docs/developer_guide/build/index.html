<!doctype html>
<html class="docs-version-0.11.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="Apache YuniKorn (Incubating)" href="/opensearch.xml"><title data-react-helmet="true">Build and Run | Apache YuniKorn (Incubating)</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-react-helmet="true" name="twitter:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-react-helmet="true" property="og:url" content="https://yunikorn.apache.org/docs/developer_guide/build"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="0.11.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-0.11.0"><meta data-react-helmet="true" property="og:title" content="Build and Run | Apache YuniKorn (Incubating)"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/img/yunikorn.ico"><link data-react-helmet="true" rel="canonical" href="https://yunikorn.apache.org/docs/developer_guide/build"><link data-react-helmet="true" rel="alternate" href="https://yunikorn.apache.org/docs/developer_guide/build" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yunikorn.apache.org/docs/developer_guide/build" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.8bfd35da.css">
<link rel="preload" href="/assets/js/runtime~main.cd716402.js" as="script">
<link rel="preload" href="/assets/js/main.15674fce.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">0.11.0 has been released, check the DOWNLOADS</div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/yunikorn.ico" alt="YuniKorn Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo/yunikorn_white_logo.png" alt="YuniKorn Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Apache YuniKorn</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Quick Start</a><a class="navbar__item navbar__link" href="/community/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/community/download">Download</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get_involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/how_to_contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/community/coding_guidelines">Coding Guidelines</a></li><li><a class="dropdown__link" href="/community/reporting_issues">Reporting Issues</a></li><li><a class="dropdown__link" href="/community/events">Events</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Apache Software Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Apache Incubator<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Events<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Sponsors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">Master</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.0/">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/">0.8.0</a></li></ul></div><a href="https://github.com/apache/incubator-yunikorn-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Get Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Developer Guide</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer_guide/env_setup">Dev Environment Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developer_guide/build">Build and Run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer_guide/deployment">Deploy to Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer_guide/openshift_development">Development in CodeReady Containers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Designs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Performance</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->0.11.0</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Build and Run</h1></header><p>YuniKorn always works with a container orchestrator system. Currently, a Kubernetes shim <a href="https://github.com/apache/incubator-yunikorn-k8shim" target="_blank" rel="noopener noreferrer">yunikorn-k8shim</a>
is provided in our repositories, you can leverage it to develop YuniKorn scheduling features and integrate with Kubernetes.
This document describes resources how to setup dev environment and how to do the development.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="development-environment-setup">Development Environment setup<a aria-hidden="true" class="hash-link" href="#development-environment-setup" title="Direct link to heading">â€‹</a></h2><p>Read the <a href="/docs/developer_guide/env_setup">environment setup guide</a> first to setup Docker and Kubernetes development environment.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="build-yunikorn-for-kubernetes">Build YuniKorn for Kubernetes<a aria-hidden="true" class="hash-link" href="#build-yunikorn-for-kubernetes" title="Direct link to heading">â€‹</a></h2><p>Prerequisite:</p><ul><li>Go 1.12+</li></ul><p>You can build the scheduler for Kubernetes from <a href="https://github.com/apache/incubator-yunikorn-k8shim" target="_blank" rel="noopener noreferrer">yunikorn-k8shim</a> project.
The build procedure will build all components into a single executable that can be deployed and running on Kubernetes.</p><p>Start the integrated build process by pulling the <code>yunikorn-k8shim</code> repository:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/yunikorn/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/yunikorn/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/apache/incubator-yunikorn-k8shim.git</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>At this point you have an environment that will allow you to build an integrated image for the YuniKorn scheduler.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="a-note-on-go-modules-and-git-version">A note on Go modules and git version<a aria-hidden="true" class="hash-link" href="#a-note-on-go-modules-and-git-version" title="Direct link to heading">â€‹</a></h3><p>Go use git to fetch module information.
Certain modules cannot be retrieved if the git version installed on the machine used to build is old.
A message similar to the one below will be logged when trying to build for the first time.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">go: finding modernc.org/mathutil@v1.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go: modernc.org/golex@v1.0.0: git fetch -f origin refs/heads/*:refs/heads/* refs/tags/*:refs/tags/* in &lt;location&gt;: exit status 128:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    error: RPC failed; result=22, HTTP code = 404</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fatal: The remote end hung up unexpectedly</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Update git to a recent version to fix this issue.
Git releases later than 1.22 are known to work.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="build-docker-image">Build Docker image<a aria-hidden="true" class="hash-link" href="#build-docker-image" title="Direct link to heading">â€‹</a></h3><p>Building a docker image can be triggered by following command.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">make image</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The image with the build in configuration can be deployed directly on kubernetes.
Some sample deployments that can be used are found under <a href="https://github.com/apache/incubator-yunikorn-k8shim/tree/master/deployments/scheduler" target="_blank" rel="noopener noreferrer">deployments</a> directory.
For the deployment that uses a config map you need to set up the ConfigMap in kubernetes.
How to deploy the scheduler with a ConfigMap is explained in the <a href="/docs/developer_guide/deployment">scheduler configuration deployment</a> document.</p><p>The image build command will first build the integrated executable and then create the docker image.
Currently, there are some published docker images under <a href="https://hub.docker.com/r/apache/yunikorn" target="_blank" rel="noopener noreferrer">this docker hub repo</a>, you are free to fetch and use.
The default image tags are not suitable for deployments to an accessible repository as it uses a hardcoded user and would push to Docker Hub with proper credentials.
You <em>must</em> update the <code>TAG</code> variable in the <code>Makefile</code> to push to an accessible repository.
When you update the image tag be aware that the deployment examples given will also need to be updated to reflect the same change.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="inspect-the-docker-image">Inspect the docker image<a aria-hidden="true" class="hash-link" href="#inspect-the-docker-image" title="Direct link to heading">â€‹</a></h3><p>The docker image built from previous step has embedded some important build info in image&#x27;s metadata. You can retrieve
these info with docker <code>inspect</code> command.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker inspect apache/yunikorn:scheduler-latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This info includes git revisions (last commit SHA) for each component, to help you understand which version of the source code
was shipped by this image. They are listed as docker image <code>labels</code>, such as</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;Labels&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;BuildTimeStamp&quot;: &quot;2019-07-16T23:08:06+0800&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Version&quot;: &quot;0.1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;yunikorn-core-revision&quot;: &quot;dca66c7e5a9e&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;yunikorn-k8shim-revision&quot;: &quot;bed60f720b28&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;yunikorn-scheduler-interface-revision&quot;: &quot;3df392eded1f&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="dependencies">Dependencies<a aria-hidden="true" class="hash-link" href="#dependencies" title="Direct link to heading">â€‹</a></h3><p>The dependencies in the projects are managed using <a href="https://blog.golang.org/using-go-modules" target="_blank" rel="noopener noreferrer">go modules</a>.
Go Modules require at least Go version 1.11 to be installed on the development system.</p><p>If you want to modify one of the projects locally and build with your local dependencies you will need to change the module file.
Changing dependencies uses mod <code>replace</code> directives as explained in the <!-- -->[Update dependencies]<!-- -->(#Updating dependencies).</p><p>The YuniKorn project has four repositories three of those repositories have a dependency at the go level.
These dependencies are part of the go modules and point to the github repositories.
During the development cycle it can be required to break the dependency on the committed version from github.
This requires making changes in the module file to allow loading a local copy or a forked copy from a different repository.  </p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="affected-repositories">Affected repositories<a aria-hidden="true" class="hash-link" href="#affected-repositories" title="Direct link to heading">â€‹</a></h4><p>The following dependencies exist between the repositories:</p><table><thead><tr><th>repository</th><th>depends on</th></tr></thead><tbody><tr><td>yunikorn-core</td><td>yunikorn-scheduler-interface</td></tr><tr><td>yunikorn-k8shim</td><td>yunikorn-scheduler-interface, yunikorn-core</td></tr><tr><td>yunikorn-scheduler-interface</td><td>none</td></tr><tr><td>yunikorn-web</td><td>yunikorn-core</td></tr></tbody></table><p>The <code>yunikorn-web</code> repository has no direct go dependency on the other repositories. However any change to the <code>yunikorn-core</code> webservices can affect the web interface. </p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="making-local-changes">Making local changes<a aria-hidden="true" class="hash-link" href="#making-local-changes" title="Direct link to heading">â€‹</a></h4><p>To make sure that the local changes will not break other parts of the build you should run:</p><ul><li>A full build <code>make</code> (build target depends on the repository)</li><li>A full unit test run <code>make test</code></li></ul><p>Any test failures should be fixed before proceeding.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="updating-dependencies">Updating dependencies<a aria-hidden="true" class="hash-link" href="#updating-dependencies" title="Direct link to heading">â€‹</a></h4><p>The simplest way is to use the <code>replace</code> directive in the module file. The <code>replace</code> directive allows you to override the import path with a new (local) path.
There is no need to change any of the imports in the source code. The change must be made in the <code>go.mod</code> file of the repository that has the dependency. </p><p>Using <code>replace</code> to use of a forked dependency, such as:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">replace github.com/apache/incubator-yunikorn-core =&gt; example.com/some/forked-yunikorn</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>There is no requirement to fork and create a new repository. If you do not have a repository you can use a local checked out copy too.
Using <code>replace</code> to use of a local directory as a dependency:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">replace github.com/apache/incubator-yunikorn-core =&gt; /User/example/local/checked-out-yunikorn</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>and for the same dependency using a relative path:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">replace github.com/apache/incubator-yunikorn-core =&gt; ../checked-out-yunikorn</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note: if the <code>replace</code> directive is using a local filesystem path, then the target must have the <code>go.mod</code> file at that location.</p><p>Further details on the modules&#x27; wiki: <a href="https://github.com/golang/go/wiki/Modules#when-should-i-use-the-replace-directive" target="_blank" rel="noopener noreferrer">When should I use the &#x27;replace&#x27; directive?</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="build-the-web-ui">Build the web UI<a aria-hidden="true" class="hash-link" href="#build-the-web-ui" title="Direct link to heading">â€‹</a></h2><p>Example deployments reference the <a href="https://github.com/apache/incubator-yunikorn-web" target="_blank" rel="noopener noreferrer">YuniKorn web UI</a>.
The YuniKorn web UI has its own specific requirements for the build. The project has specific requirements for the build follow the steps in the README to prepare a development environment and build how to build the projects.
The scheduler is fully functional without the web UI. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="locally-run-the-integrated-scheduler">Locally run the integrated scheduler<a aria-hidden="true" class="hash-link" href="#locally-run-the-integrated-scheduler" title="Direct link to heading">â€‹</a></h2><p>When you have a local development environment setup you can run the scheduler in your local kubernetes environment.
This has been tested in a Docker desktop with &#x27;Docker for desktop&#x27; and Minikube. See the <a href="/docs/developer_guide/env_setup">environment setup guide</a> for further details.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>It will connect with the kubernetes cluster using the users configured configuration located in <code>$HOME/.kube/config</code>.</p><p>You can also use the same approach to run the scheduler locally but connecting to a remote kubernetes cluster,
as long as the <code>$HOME/.kube/config</code> file is pointing to that remote cluster.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/developer_guide/env_setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Dev Environment Setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/developer_guide/deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploy to Kubernetes<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#development-environment-setup" class="table-of-contents__link toc-highlight">Development Environment setup</a></li><li><a href="#build-yunikorn-for-kubernetes" class="table-of-contents__link toc-highlight">Build YuniKorn for Kubernetes</a><ul><li><a href="#a-note-on-go-modules-and-git-version" class="table-of-contents__link toc-highlight">A note on Go modules and git version</a></li><li><a href="#build-docker-image" class="table-of-contents__link toc-highlight">Build Docker image</a></li><li><a href="#inspect-the-docker-image" class="table-of-contents__link toc-highlight">Inspect the docker image</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li></ul></li><li><a href="#build-the-web-ui" class="table-of-contents__link toc-highlight">Build the web UI</a></li><li><a href="#locally-run-the-integrated-scheduler" class="table-of-contents__link toc-highlight">Locally run the integrated scheduler</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.cloudera.com/yunikorn-a-universal-resources-scheduler/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>What&#x27;s YuniKorn?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.cloudera.com/apache-yunikorn-incubating-0-8-release-whats-new-and-upcoming/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>What&#x27;s new in YuniKorn 0.8.0?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>scheduler-core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>kubernetes-shim<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>scheduler-interface<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-web" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>scheduler-web<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community/get_involved">Get Involved</a></li><li class="footer__item"><a href="https://people.apache.org/phonebook.html?podling=yunikorn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Roster<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://issues.apache.org/jira/projects/YUNIKORN/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="https://incubator.apache.org/images/incubator_feather_egg_logo.png" alt="Apache Incubator Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="https://incubator.apache.org/images/incubator_feather_egg_logo.png" alt="Apache Incubator Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">
<div style="font-size: 70%">
Copyright Â© 2020-2021 <a href="https://www.apache.org/">The Apache Software Foundation</a>. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. <br>
<div style="padding:20px; margin: 10px; color: #4d4d4d;">
<p>Apache YuniKorn is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>

<p>The Apache Software Foundation Apache YuniKorn, YuniKorn, Apache, the Apache feather, and the Apache YuniKorn project logo are either registered trademarks or trademarks of the Apache Software Foundation.  Apache YuniKorn is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor.</p>
</div>
</div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.cd716402.js"></script>
<script src="/assets/js/main.15674fce.js"></script>
</body>
</html>
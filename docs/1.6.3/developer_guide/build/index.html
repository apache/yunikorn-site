<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.6.3 docs-doc-page docs-doc-id-developer_guide/build" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Build and Run | Apache YuniKorn</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-rh="true" name="twitter:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-rh="true" property="og:url" content="https://yunikorn.apache.org/docs/1.6.3/developer_guide/build"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.6.3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.6.3"><meta data-rh="true" name="docsearch:version" content="1.6.3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.6.3"><meta data-rh="true" property="og:title" content="Build and Run | Apache YuniKorn"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/yunikorn.ico"><link data-rh="true" rel="canonical" href="https://yunikorn.apache.org/docs/1.6.3/developer_guide/build"><link data-rh="true" rel="alternate" href="https://yunikorn.apache.org/docs/1.6.3/developer_guide/build" hreflang="en"><link data-rh="true" rel="alternate" href="https://yunikorn.apache.org/docs/1.6.3/developer_guide/build" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Build and Run","item":"https://yunikorn.apache.org/docs/1.6.3/developer_guide/build"}]}</script><link rel="stylesheet" href="/assets/css/styles.300258bb.css">
<script src="/assets/js/runtime~main.6fbb7789.js" defer="defer"></script>
<script src="/assets/js/main.9413b8b9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo/yunikorn_blue_logo.png"><link rel="preload" as="image" href="/img/logo/yunikorn_white_logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_R1_g" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_we1V" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_Aaps"></div><div class="content_GMTy announcementBarContent_Dslk">1.8.0 has been released, check the <a href="/community/download">DOWNLOADS</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_ibyH announcementBarClose_KLUq"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo/yunikorn_blue_logo.png" alt="YuniKorn Site Logo" class="themedComponent_UaRn themedComponent--light_GcFl"><img src="/img/logo/yunikorn_white_logo.png" alt="YuniKorn Site Logo" class="themedComponent_UaRn themedComponent--dark_cRKq"></div><b class="navbar__title text--truncate">Apache YuniKorn</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/community/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/community/download">Download</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get_involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/how_to_contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/community/coding_guidelines">Coding Guidelines</a></li><li><a class="dropdown__link" href="/community/reporting_issues">Reporting Issues</a></li><li><a class="dropdown__link" href="/community/release_procedure">Release Procedure</a></li><li><a class="dropdown__link" href="/community/events">Events</a></li><li><a class="dropdown__link" href="/community/people">People</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsors<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy Policy<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.6.3/developer_guide/build">1.6.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/developer_guide/build">Next</a></li><li><a class="dropdown__link" href="/docs/developer_guide/build">1.8.0</a></li><li><a class="dropdown__link" href="/docs/1.7.0/developer_guide/build">1.7.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.6.3/developer_guide/build">1.6.3</a></li><li><a class="dropdown__link" href="/docs/1.5.2/developer_guide/build">1.5.2</a></li><li><a class="dropdown__link" href="/docs/1.4.0/developer_guide/build">1.4.0</a></li><li><a class="dropdown__link" href="/docs/1.3.0/developer_guide/build">1.3.0</a></li><li><a class="dropdown__link" href="/docs/1.2.0/developer_guide/build">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.0/developer_guide/build">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.0/developer_guide/build">1.0.0</a></li></ul></div><a href="https://github.com/apache/yunikorn-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_F_v6 colorModeToggle_Q_p6"><button class="clean-btn toggleButton_SDTP toggleButtonDisabled_kLqS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_fe7F lightToggleIcon_nuvI"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_fe7F darkToggleIcon_Vg9o"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_fe7F systemToggleIcon_tPrl"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Pnmw"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-1.6.3"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_moJq"><div class="docsWrapper_sO3k"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_UXcQ" type="button"></button><div class="docRoot_TM3S"><aside class="theme-doc-sidebar-container docSidebarContainer_soD5"><div class="sidebarViewport_ip8X"><div class="sidebar_FfRL"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Z4HB menuWithAnnouncementBar_l9Vq"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.6.3/"><span title="Get Started" class="categoryLinkLabel_O_Xk">Get Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.6.3/user_guide/deployment_modes"><span title="User Guide" class="categoryLinkLabel_O_Xk">User Guide</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/1.6.3/developer_guide/env_setup"><span title="Developer Guide" class="categoryLinkLabel_O_Xk">Developer Guide</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.6.3/developer_guide/env_setup"><span title="Dev Environment Setup" class="linkLabel_B9Q0">Dev Environment Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.6.3/developer_guide/build"><span title="Build and Run" class="linkLabel_B9Q0">Build and Run</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.6.3/developer_guide/dependencies"><span title="Go module updates" class="linkLabel_B9Q0">Go module updates</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.6.3/developer_guide/deployment"><span title="Deploy to Kubernetes" class="linkLabel_B9Q0">Deploy to Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.6.3/developer_guide/openshift_development"><span title="Development in CodeReady Containers" class="linkLabel_B9Q0">Development in CodeReady Containers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.6.3/developer_guide/scheduler_object_states"><span title="Scheduler Object States" class="linkLabel_B9Q0">Scheduler Object States</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.6.3/developer_guide/e2e_test"><span title="End-to-End Testing" class="linkLabel_B9Q0">End-to-End Testing</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/1.6.3/design/architecture"><span title="Designs" class="categoryLinkLabel_O_Xk">Designs</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/1.6.3/archived_design/k8shim"><span title="Archived Designs" class="categoryLinkLabel_O_Xk">Archived Designs</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.6.3/performance/evaluate_perf_function_with_kubemark"><span title="Performance" class="categoryLinkLabel_O_Xk">Performance</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_edMs"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_LCV3"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache YuniKorn<!-- --> <b>1.6.3</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/developer_guide/build">latest version</a></b> (<!-- -->1.8.0<!-- -->).</div></div><div class="docItemContainer_YmdO"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_SrFi" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kzNo"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Build and Run</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.6.3</span><div class="tocCollapsible_JdT0 theme-doc-toc-mobile tocMobile_YQri"><button type="button" class="clean-btn tocCollapsibleButton_UKbQ">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Build and Run</h1></header><p>YuniKorn always works with a container orchestrator system. Currently, a
Kubernetes shim (<a href="https://github.com/apache/yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="">yunikorn-k8shim</a>)
is provided which provides a drop-in scheduler for the Kubernetes platform.
This document describes how to setup and use a local development environment.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="dev-environment-setup">Dev Environment setup<a href="#dev-environment-setup" class="hash-link" aria-label="Direct link to Dev Environment setup" title="Direct link to Dev Environment setup" translate="no">​</a></h2>
<p>Read the <a class="" href="/docs/1.6.3/developer_guide/env_setup">Dev Environment Setup</a> guide first to
setup Docker and Kubernetes development environment.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="build-yunikorn">Build YuniKorn<a href="#build-yunikorn" class="hash-link" aria-label="Direct link to Build YuniKorn" title="Direct link to Build YuniKorn" translate="no">​</a></h2>
<p>Prerequisites:</p>
<ul>
<li class="">Golang: check the <code>.go_version</code> file in the root of the repositories for the
version Yunikorn requires. The minimum version can change per release branch.
Using earlier Go versions will cause compilation issues.</li>
</ul>
<p>You can build the scheduler for Kubernetes from the <a href="https://github.com/apache/yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="">yunikorn-k8shim</a>
project. The build procedure will build all components into a single executable
that can be deployed and running on Kubernetes.</p>
<p>Start the integrated build process by pulling the <code>yunikorn-k8shim</code> repository:</p>
<div class="language-bash codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-bash codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir $HOME/yunikorn/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $HOME/yunikorn/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://github.com/apache/yunikorn-k8shim.git</span><br></span></code></pre></div></div>
<p>At this point you have an environment that will allow you to build an
integrated image for the YuniKorn scheduler.</p>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="build-docker-images">Build Docker images<a href="#build-docker-images" class="hash-link" aria-label="Direct link to Build Docker images" title="Direct link to Build Docker images" translate="no">​</a></h3>
<p>Building the Docker images can be triggered by following command:</p>
<div class="language-shell codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-shell codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">make image</span><br></span></code></pre></div></div>
<p>This will generate images for the scheduler, scheduler plugin, and admission
controller.</p>
<p>The images created can be deployed directly on Kubernetes.
Some sample deployments that can be used are found under the
<a href="https://github.com/apache/yunikorn-k8shim/tree/master/deployments/scheduler" target="_blank" rel="noopener noreferrer" class="">deployments/scheduler</a>
directory of the <code>yunikorn-k8shim</code> repository. Alternatively, the Helm charts
located within the <a href="https://github.com/apache/yunikorn-release/tree/master/helm-charts" target="_blank" rel="noopener noreferrer" class="">helm-charts</a>
directory of the <code>yunikorn-release</code> repository may be used. These match what is used
for release builds.</p>
<p>The configuration of YuniKorn can be customized via a ConfigMap as explained  in the
<a class="" href="/docs/1.6.3/developer_guide/deployment">scheduler configuration deployment</a> document.</p>
<p>The <code>make image</code> build command will first build the integrated executables and
then create the docker images. If you want to use pre-built images based on an
offical release, please check the <a href="https://hub.docker.com/r/apache/yunikorn" target="_blank" rel="noopener noreferrer" class="">Docker Hub repo</a>.</p>
<p>The default image tags are not suitable for deployments to a private
repository as these would attempt to push to Docker Hub without proper
credentials. You <em>must</em> update the <code>REGISTRY</code> variable in the <code>Makefile</code> to
push to an accessible repository. When you update the image tag be aware that
the deployment examples given will also need to be updated to reflect the same
change.</p>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="inspect-docker-images">Inspect Docker images<a href="#inspect-docker-images" class="hash-link" aria-label="Direct link to Inspect Docker images" title="Direct link to Inspect Docker images" translate="no">​</a></h3>
<p>The Docker images built from previous step have embedded some important build
info in the image metadata. You can retrieve this information with docker
<code>inspect</code> command:</p>
<div class="language-shell codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-shell codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker inspect apache/yunikorn:scheduler-amd64-latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker inspect apache/yunikorn:scheduler-plugin-amd64-latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker inspect apache/yunikorn:admission-controller-amd64-latest</span><br></span></code></pre></div></div>
<p>The <code>amd64</code> tag is dependent on your host architecture (i.e. for Intel it would
be <code>amd64</code> and for Mac M1, it would be <code>arm64</code>).</p>
<p>This info includes git revisions (last commit SHA) for each component, to help
you understand which version of the source code was shipped by this image. They
are listed as docker image <code>labels</code>, such as</p>
<div class="language-json codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-json codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;Labels&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;BuildTimeStamp&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2019-07-16T23:08:06+0800&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Version&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;yunikorn-core-revision&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;dca66c7e5a9e&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;yunikorn-k8shim-revision&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bed60f720b28&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;yunikorn-scheduler-interface-revision&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;3df392eded1f&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to Dependencies" title="Direct link to Dependencies" translate="no">​</a></h3>
<p>The dependencies in the projects are managed using
<a href="https://blog.golang.org/using-go-modules" target="_blank" rel="noopener noreferrer" class="">go modules</a>.</p>
<p>If you want to modify one of the projects locally and build with your local
dependencies you will need to change the module file.  Changing dependencies
requires using <code>go.mod</code> <code>replace</code> directives as explained in the
<a href="#updating-dependencies" class="">Update dependencies</a> section.</p>
<p>The YuniKorn project has four code repositories:</p>
<ul>
<li class=""><a href="https://github.com/apache/yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="">yunikorn-scheduler-interface</a>
(protobuf interface between core and shim)</li>
<li class=""><a href="https://github.com/apache/yunikorn-core" target="_blank" rel="noopener noreferrer" class="">yunikorn-core</a>
(core scheduler logic)</li>
<li class=""><a href="https://github.com/apache/yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="">yunikorn-k8shim</a>
(Kubernetes-specific shim)</li>
<li class=""><a href="https://github.com/apache/yunikorn-web" target="_blank" rel="noopener noreferrer" class="">yunikorn-web</a>
(YuniKorn Web UI)</li>
</ul>
<p>Each of these dependencies is a Go module and there are dependencies between
them. During the development cycle it can be required to break the dependency
on the committed version from github. This requires making changes in the module
file to allow loading a local copy or a forked copy from a different repository.</p>
<p>Additionally, there are two additional auxiliary repositories:</p>
<ul>
<li class=""><a href="https://github.com/apache/yunikorn-release" target="_blank" rel="noopener noreferrer" class="">yunikorn-release</a>
(release management scripts and official Helm charts)</li>
<li class=""><a href="https://github.com/apache/yunikorn-site" target="_blank" rel="noopener noreferrer" class="">yunikorn-site</a>
(source of the yunikorn.apache.org web site)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="affected-repositories">Affected repositories<a href="#affected-repositories" class="hash-link" aria-label="Direct link to Affected repositories" title="Direct link to Affected repositories" translate="no">​</a></h4>
<p>The following dependencies exist between the repositories:</p>
<table><thead><tr><th>Repository</th><th>Depends on</th></tr></thead><tbody><tr><td>yunikorn-core</td><td>yunikorn-scheduler-interface</td></tr><tr><td>yunikorn-k8shim</td><td>yunikorn-scheduler-interface, yunikorn-core</td></tr><tr><td>yunikorn-scheduler-interface</td><td>none</td></tr><tr><td>yunikorn-web</td><td>none</td></tr></tbody></table>
<p>The <code>yunikorn-web</code> repository has no direct go dependency on the other
repositories. However any change to the <code>yunikorn-core</code> web services can affect
the web interface.</p>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="making-local-changes">Making local changes<a href="#making-local-changes" class="hash-link" aria-label="Direct link to Making local changes" title="Direct link to Making local changes" translate="no">​</a></h4>
<p>To make sure that the local changes will not break other parts of the
build you should run:</p>
<ul>
<li class="">
<p>A full build <code>make</code> (build target depends on the repository)</p>
</li>
<li class="">
<p>A full unit test run <code>make test</code></p>
</li>
<li class="">
<p>For diagnosing flaky tests, which are challenging due to their infrequent failures, use a looping command to repeatedly run the test. For instance, to diagnose <code>TestNoFillWithoutEventPluginRegistered</code> in <code>yunikorn-core/pkg/events/event_publisher_test.go</code>, you can use the following command:</p>
<div class="language-sh codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-sh codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">I=0; while go test -run TestNoFillWithoutEventPluginRegistered ./pkg/... -count=1; do (( I=$I+1 )); echo &quot;Completed loop: $I&quot;; sleep 1; done</span><br></span></code></pre></div></div>
</li>
</ul>
<p>Any test failures should be fixed before proceeding.</p>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="updating-dependencies">Updating dependencies<a href="#updating-dependencies" class="hash-link" aria-label="Direct link to Updating dependencies" title="Direct link to Updating dependencies" translate="no">​</a></h4>
<p>The simplest way is to use the <code>replace</code> directive in the module file.
The <code>replace</code> directive allows you to override the import path with a new
(local) path. There is no need to change any of the imports in the source code.
The change must be made in the <code>go.mod</code> file of the repository that has the
dependency.</p>
<p>Using <code>replace</code> to use of a forked dependency, such as:</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">replace github.com/apache/yunikorn-core =&gt; example.com/some/forked-yunikorn</span><br></span></code></pre></div></div>
<p>There is no requirement to fork and create a new repository. If you do not have
a repository you can use a local checked out copy too.</p>
<p>Using <code>replace</code> to use of a local directory as a dependency:</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">replace github.com/apache/yunikorn-core =&gt; /User/example/local/checked-out-yunikorn</span><br></span></code></pre></div></div>
<p>For the same dependency using a relative path:</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">replace github.com/apache/yunikorn-core =&gt; ../checked-out-yunikorn</span><br></span></code></pre></div></div>
<p>Note: if the <code>replace</code> directive is using a local filesystem path, then the target
must have a <code>go.mod</code> file at that location.</p>
<p>Further details can be found on the Go Wiki:
<a href="https://github.com/golang/go/wiki/Modules#when-should-i-use-the-replace-directive" target="_blank" rel="noopener noreferrer" class="">When should I use the &#x27;replace&#x27; directive?</a></p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="build-the-web-ui">Build the Web UI<a href="#build-the-web-ui" class="hash-link" aria-label="Direct link to Build the Web UI" title="Direct link to Build the Web UI" translate="no">​</a></h2>
<p>Example deployments reference the
<a href="https://github.com/apache/yunikorn-web" target="_blank" rel="noopener noreferrer" class="">YuniKorn Web UI</a>. The <code>yunikorn-web</code>
project has specific requirements for the build. Follow the steps in the
<a href="https://github.com/apache/yunikorn-web/blob/master/README.md" target="_blank" rel="noopener noreferrer" class="">README</a> to prepare
a development environment and build the Web UI. However, the scheduler is fully
functional without the Web UI.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="run-yunikorn-locally">Run YuniKorn locally<a href="#run-yunikorn-locally" class="hash-link" aria-label="Direct link to Run YuniKorn locally" title="Direct link to Run YuniKorn locally" translate="no">​</a></h2>
<p>When you have a local development environment setup you can run the scheduler
in your local Kubernetes environment. This has been tested in a desktop
enviornment with Docker Desktop, Minikube, and Kind. See the
<a class="" href="/docs/1.6.3/developer_guide/env_setup">Dev Environment Setup</a> guide for further details.</p>
<p>To run a local instance of the scheduler:</p>
<div class="language-shell codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-shell codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run</span><br></span></code></pre></div></div>
<p>This will launch a local scheduler and connect to the Kubernetes cluster
referenced in your <code>KUBECONFIG</code> or <code>$HOME/.kube/config</code>.</p>
<p>To run YuniKorn in Kubernetes scheduler plugin mode instead, execute:</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run_plugin</span><br></span></code></pre></div></div>
<p>You can also use the same approach to run the scheduler locally but connecting
to a remote kubernetes cluster, as long as the <code>$HOME/.kube/config</code> file
is pointing to that remote cluster.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="run-end-to-end-tests">Run end-to-end tests<a href="#run-end-to-end-tests" class="hash-link" aria-label="Direct link to Run end-to-end tests" title="Direct link to Run end-to-end tests" translate="no">​</a></h2>
<p>In addition to the unit tests for each project, YuniKorn contains many e2e
(end-to-end) tests in the <code>yunikorn-k8shim</code> repository which validate
functionaliy of the scheduler on a functioning Kubernetes cluster.</p>
<p>How to run the tests locally is described
<a class="" href="/docs/1.6.3/developer_guide/e2e_test">here</a>.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.6.3/developer_guide/env_setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Dev Environment Setup</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.6.3/developer_guide/dependencies"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Go module updates</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_PLqt thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dev-environment-setup" class="table-of-contents__link toc-highlight">Dev Environment setup</a></li><li><a href="#build-yunikorn" class="table-of-contents__link toc-highlight">Build YuniKorn</a><ul><li><a href="#build-docker-images" class="table-of-contents__link toc-highlight">Build Docker images</a></li><li><a href="#inspect-docker-images" class="table-of-contents__link toc-highlight">Inspect Docker images</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li></ul></li><li><a href="#build-the-web-ui" class="table-of-contents__link toc-highlight">Build the Web UI</a></li><li><a href="#run-yunikorn-locally" class="table-of-contents__link toc-highlight">Run YuniKorn locally</a></li><li><a href="#run-end-to-end-tests" class="table-of-contents__link toc-highlight">Run end-to-end tests</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.cloudera.com/yunikorn-a-universal-resources-scheduler/" target="_blank" rel="noopener noreferrer" class="footer__link-item">What&#x27;s YuniKorn?<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Spark on Kubernetes – Gang Scheduling with YuniKorn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Code Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/apache/yunikorn-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core scheduler<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes shim<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="footer__link-item">Scheduler Interface<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-web" target="_blank" rel="noopener noreferrer" class="footer__link-item">WEB application<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-site" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get_involved">Get Involved</a></li><li class="footer__item"><a class="footer__link-item" href="/community/people">People</a></li><li class="footer__item"><a href="https://issues.apache.org/jira/projects/YUNIKORN/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<div style="font-size: 70%">
Copyright © 2020-2026 <a href="https://www.apache.org/">The Apache Software Foundation</a>. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. <br>
<div style="padding:20px; margin: 10px; color: #4d4d4d;">
<p>The Apache Software Foundation Apache YuniKorn, YuniKorn, Apache, the Apache feather, and the Apache YuniKorn project logo are either registered trademarks or trademarks of the Apache Software Foundation.</p>
</div>
</div></div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.2.0 docs-doc-page docs-doc-id-design/interface_message_simplification" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Simplifying Interface Messages | Apache YuniKorn</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-rh="true" name="twitter:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-rh="true" property="og:url" content="https://yunikorn.apache.org/docs/1.2.0/design/interface_message_simplification"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.2.0"><meta data-rh="true" name="docsearch:version" content="1.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.2.0"><meta data-rh="true" property="og:title" content="Simplifying Interface Messages | Apache YuniKorn"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/yunikorn.ico"><link data-rh="true" rel="canonical" href="https://yunikorn.apache.org/docs/1.2.0/design/interface_message_simplification"><link data-rh="true" rel="alternate" href="https://yunikorn.apache.org/docs/1.2.0/design/interface_message_simplification" hreflang="en"><link data-rh="true" rel="alternate" href="https://yunikorn.apache.org/docs/1.2.0/design/interface_message_simplification" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Simplifying Interface Messages","item":"https://yunikorn.apache.org/docs/1.2.0/design/interface_message_simplification"}]}</script><link rel="stylesheet" href="/assets/css/styles.6acc5f6f.css">
<script src="/assets/js/runtime~main.63724556.js" defer="defer"></script>
<script src="/assets/js/main.7289cfb4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo/yunikorn_blue_logo.png"><link rel="preload" as="image" href="/img/logo/yunikorn_white_logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_R1_g" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_we1V" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_Aaps"></div><div class="content_GMTy announcementBarContent_Dslk">1.7.0 has been released, check the <a href="/community/download">DOWNLOADS</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_ibyH announcementBarClose_KLUq"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo/yunikorn_blue_logo.png" alt="YuniKorn Site Logo" class="themedComponent_UaRn themedComponent--light_GcFl"><img src="/img/logo/yunikorn_white_logo.png" alt="YuniKorn Site Logo" class="themedComponent_UaRn themedComponent--dark_cRKq"></div><b class="navbar__title text--truncate">Apache YuniKorn</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/community/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/community/download">Download</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get_involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/how_to_contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/community/coding_guidelines">Coding Guidelines</a></li><li><a class="dropdown__link" href="/community/reporting_issues">Reporting Issues</a></li><li><a class="dropdown__link" href="/community/release_procedure">Release Procedure</a></li><li><a class="dropdown__link" href="/community/events">Events</a></li><li><a class="dropdown__link" href="/community/people">People</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsors<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy Policy<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.2.0/design/interface_message_simplification">1.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/design/interface_message_simplification">Next</a></li><li><a class="dropdown__link" href="/docs/design/interface_message_simplification">1.7.0</a></li><li><a class="dropdown__link" href="/docs/1.6.3/design/interface_message_simplification">1.6.3</a></li><li><a class="dropdown__link" href="/docs/1.6.2/design/interface_message_simplification">1.6.2</a></li><li><a class="dropdown__link" href="/docs/1.6.1/design/interface_message_simplification">1.6.1</a></li><li><a class="dropdown__link" href="/docs/1.6.0/design/interface_message_simplification">1.6.0</a></li><li><a class="dropdown__link" href="/docs/1.5.2/design/interface_message_simplification">1.5.2</a></li><li><a class="dropdown__link" href="/docs/1.5.1/design/interface_message_simplification">1.5.1</a></li><li><a class="dropdown__link" href="/docs/1.5.0/design/interface_message_simplification">1.5.0</a></li><li><a class="dropdown__link" href="/docs/1.4.0/design/interface_message_simplification">1.4.0</a></li><li><a class="dropdown__link" href="/docs/1.3.0/design/interface_message_simplification">1.3.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.2.0/design/interface_message_simplification">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.0/design/interface_message_simplification">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.0/">1.0.0</a></li></ul></div><a href="https://github.com/apache/yunikorn-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_F_v6 colorModeToggle_Q_p6"><button class="clean-btn toggleButton_SDTP toggleButtonDisabled_kLqS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_fe7F lightToggleIcon_nuvI"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_fe7F darkToggleIcon_Vg9o"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_fe7F systemToggleIcon_tPrl"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Pnmw"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-1.2.0"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_moJq"><div class="docsWrapper_sO3k"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_UXcQ" type="button"></button><div class="docRoot_TM3S"><aside class="theme-doc-sidebar-container docSidebarContainer_soD5"><div class="sidebarViewport_ip8X"><div class="sidebar_FfRL"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Z4HB menuWithAnnouncementBar_l9Vq"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.2.0/"><span title="Get Started" class="categoryLinkLabel_O_Xk">Get Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.2.0/user_guide/deployment_modes"><span title="User Guide" class="categoryLinkLabel_O_Xk">User Guide</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/1.2.0/developer_guide/env_setup"><span title="Developer Guide" class="categoryLinkLabel_O_Xk">Developer Guide</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/developer_guide/env_setup"><span title="Dev Environment Setup" class="linkLabel_B9Q0">Dev Environment Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/developer_guide/build"><span title="Build and Run" class="linkLabel_B9Q0">Build and Run</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/developer_guide/dependencies"><span title="Go module updates" class="linkLabel_B9Q0">Go module updates</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/developer_guide/deployment"><span title="Deploy to Kubernetes" class="linkLabel_B9Q0">Deploy to Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/developer_guide/openshift_development"><span title="Development in CodeReady Containers" class="linkLabel_B9Q0">Development in CodeReady Containers</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/1.2.0/design/architecture"><span title="Designs" class="categoryLinkLabel_O_Xk">Designs</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/architecture"><span title="Architecture" class="linkLabel_B9Q0">Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/scheduler_plugin"><span title="K8s Scheduler Plugin" class="linkLabel_B9Q0">K8s Scheduler Plugin</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/gang_scheduling"><span title="Gang scheduling design" class="linkLabel_B9Q0">Gang scheduling design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/user_group"><span title="User/Group handling and lookup design" class="linkLabel_B9Q0">User/Group handling and lookup design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/user_based_resource_usage_tracking"><span title="User Based Resource Usage Tracking" class="linkLabel_B9Q0">User Based Resource Usage Tracking</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.2.0/design/interface_message_simplification"><span title="Simplifying Interface Messages" class="linkLabel_B9Q0">Simplifying Interface Messages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/cache_removal"><span title="Scheduler cache removal design" class="linkLabel_B9Q0">Scheduler cache removal design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/simple_preemptor"><span title="DaemonSet Scheduling using Simple Preemptor" class="linkLabel_B9Q0">DaemonSet Scheduling using Simple Preemptor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/generic_resource"><span title="Generic Resource Types in Namespace Quota" class="linkLabel_B9Q0">Generic Resource Types in Namespace Quota</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/pluggable_app_management"><span title="Pluggable App Management" class="linkLabel_B9Q0">Pluggable App Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/priority_scheduling"><span title="Priority Scheduling" class="linkLabel_B9Q0">Priority Scheduling</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/resilience"><span title="Resilience" class="linkLabel_B9Q0">Resilience</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/state_aware_scheduling"><span title="Batch Workloads Ordering with StateAware Policy" class="linkLabel_B9Q0">Batch Workloads Ordering with StateAware Policy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/scheduler_object_states"><span title="Scheduler Object States" class="linkLabel_B9Q0">Scheduler Object States</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/config_v2"><span title="Configuration V2" class="linkLabel_B9Q0">Configuration V2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.2.0/design/scheduler_configuration"><span title="Scheduler Configuration" class="linkLabel_B9Q0">Scheduler Configuration</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/1.2.0/archived_design/k8shim"><span title="Archived Designs" class="categoryLinkLabel_O_Xk">Archived Designs</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_Q6cz menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.2.0/performance/evaluate_perf_function_with_kubemark"><span title="Performance" class="categoryLinkLabel_O_Xk">Performance</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_edMs"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_LCV3"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache YuniKorn<!-- --> <b>1.2.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/design/interface_message_simplification">latest version</a></b> (<!-- -->1.7.0<!-- -->).</div></div><div class="docItemContainer_YmdO"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_SrFi" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kzNo"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Designs</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Simplifying Interface Messages</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.2.0</span><div class="tocCollapsible_JdT0 theme-doc-toc-mobile tocMobile_YQri"><button type="button" class="clean-btn tocCollapsibleButton_UKbQ">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Simplifying Interface Messages and Breaking Shim build dependency on Core</h1></header>
<h1>Proposal</h1>
<p>This document describes a) complexity hidden behind existing Interface messages and
explains the newly defined SI messages and its dependent changes on Core and Shim.
b). Breaking Shim build dependency on Core.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="goals">Goals<a href="#goals" class="hash-link" aria-label="Direct link to Goals" title="Direct link to Goals" translate="no">​</a></h2>
<p>The goal is to provide the same functionality before and after the change.</p>
<ul>
<li class="">unit tests before and after the merge must all pass.</li>
<li class="">Smoke tests defined in the core should all pass without major changes definition.</li>
<li class="">End-to-end tests that are part of the shim code must all pass without changes.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background" translate="no">​</a></h2>
<p>The current interface allows us to only send one message between a shim and the core. This provides us with a really simple way of interactions definition.</p>
<p>The complexity is however hidden in the message itself. Every message serves multiple purposes and when the message is received the core and shim need to unpack it and process each part separately and for certain parts in a real specific order.
Because the message serves a number of purposes it has a large overhead. This might not show up in the code directly as the heavy lifting is done in the generated code. It will show up in the amount of data as a message, even if it does not have all fields, still needs to be encoded in a way that it unpacks correctly on the other side.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="simplifying-interface-messages">Simplifying Interface Messages<a href="#simplifying-interface-messages" class="hash-link" aria-label="Direct link to Simplifying Interface Messages" title="Direct link to Simplifying Interface Messages" translate="no">​</a></h2>
<p>Proposal is to split the one large message into 3 separate messages - one for each entity:</p>
<ul>
<li class="">Allocations</li>
<li class="">Applications</li>
<li class="">Nodes</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="api-interface-changes">API Interface Changes<a href="#api-interface-changes" class="hash-link" aria-label="Direct link to API Interface Changes" title="Direct link to API Interface Changes" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">package api</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import &quot;github.com/apache/incubator-yunikorn-scheduler-interface/lib/go/si&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">type SchedulerAPI interface {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Register a new RM, if it is a reconnect from previous RM, cleanup </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // all in-memory data and resync with RM. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RegisterResourceManager(request *si.RegisterResourceManagerRequest, callback ResourceManagerCallback) (*si.RegisterResourceManagerResponse, error)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Update Allocation status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateAllocation(request *si.AllocationRequest) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Update Application status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateApplication(request *si.ApplicationRequest) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Update Node status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateNode(request *si.NodeRequest) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Notify scheduler to reload configuration and hot-refresh in-memory state based on configuration changes </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateConfiguration(clusterID string) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// RM side needs to implement this API</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">type ResourceManagerCallback interface {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Receive Allocation Update Response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateAllocation(response *si.AllocationResponse) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Receive Application Update Response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateApplication(response *si.ApplicationResponse) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Receive Node update Response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateNode(response *si.NodeResponse) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Run a certain set of predicate functions to determine if a proposed allocation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // can be allocated onto a node.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Predicates(args *si.PredicatesArgs) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // RM side implements this API when it can provide plugin for reconciling</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Re-sync scheduler cache can sync some in-cache (yunikorn-core side) state changes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // to scheduler cache (shim-side), such as assumed allocations.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ReSyncSchedulerCache(args *si.ReSyncSchedulerCacheArgs) error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // This plugin is responsible for transmitting events to the shim side.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Events can be further exposed from the shim.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SendEvent(events []*si.EventRecord)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Scheduler core can update container scheduling state to the RM,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // the shim side can determine what to do incorporate with the scheduling state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // update container scheduling state to the shim side</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // this might be called even the container scheduling state is unchanged</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // the shim side cannot assume to only receive updates on state changes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // the shim side implementation must be thread safe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateContainerSchedulingState(request *si.UpdateContainerSchedulingStateRequest)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Update configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UpdateConfiguration(args *si.UpdateConfigurationRequest) *si.UpdateConfigurationResponse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="interface-changes-to-replace-updaterequest">Interface Changes to replace UpdateRequest<a href="#interface-changes-to-replace-updaterequest" class="hash-link" aria-label="Direct link to Interface Changes to replace UpdateRequest" title="Direct link to Interface Changes to replace UpdateRequest" translate="no">​</a></h3>
<p>UpdateRequest would be divided into below messages:</p>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="allocationrequest">AllocationRequest<a href="#allocationrequest" class="hash-link" aria-label="Direct link to AllocationRequest" title="Direct link to AllocationRequest" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message AllocationRequest {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated AllocationAsk asks = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  AllocationReleasesRequest releases = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  string rmID = 3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="applicationrequest">ApplicationRequest<a href="#applicationrequest" class="hash-link" aria-label="Direct link to ApplicationRequest" title="Direct link to ApplicationRequest" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message ApplicationRequest {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated AddApplicationRequest new = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated RemoveApplicationRequest remove = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  string rmID = 3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="noderequest">NodeRequest<a href="#noderequest" class="hash-link" aria-label="Direct link to NodeRequest" title="Direct link to NodeRequest" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message NodeRequest {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated NodeInfo nodes = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  string rmID = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="merging-create-and-update-nodeinfo-into-single-nodeinfo">Merging Create and Update NodeInfo into Single NodeInfo<a href="#merging-create-and-update-nodeinfo-into-single-nodeinfo" class="hash-link" aria-label="Direct link to Merging Create and Update NodeInfo into Single NodeInfo" title="Direct link to Merging Create and Update NodeInfo into Single NodeInfo" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message NodeInfo {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enum ActionFromRM {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CREATE = 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    UPDATE = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    DRAIN = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SCHEDULABLE = 3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    DECOMISSION = 4;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  string nodeID = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ActionFromRM action = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  map&lt;string, string&gt; attributes = 3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Resource schedulableResource = 4;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Resource occupiedResource = 5;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated Allocation existingAllocations = 6;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="event-changes-to-replace-updaterequest">Event Changes to replace UpdateRequest<a href="#event-changes-to-replace-updaterequest" class="hash-link" aria-label="Direct link to Event Changes to replace UpdateRequest" title="Direct link to Event Changes to replace UpdateRequest" translate="no">​</a></h3>
<p>RMUpdateRequestEvent would be replaced by following events:</p>
<ul>
<li class="">RMUpdateAllocationEvent</li>
<li class="">RMUpdateApplicationEvent</li>
<li class="">RMUpdateNodeEvent</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="interface-changes-to-replace-updateresponse">Interface Changes to replace UpdateResponse<a href="#interface-changes-to-replace-updateresponse" class="hash-link" aria-label="Direct link to Interface Changes to replace UpdateResponse" title="Direct link to Interface Changes to replace UpdateResponse" translate="no">​</a></h3>
<p>UpdateResponse would be divided into below messages:</p>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="allocationresponse">AllocationResponse<a href="#allocationresponse" class="hash-link" aria-label="Direct link to AllocationResponse" title="Direct link to AllocationResponse" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message AllocationResponse {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated Allocation new = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated AllocationRelease released = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated AllocationAskRelease releasedAsks =3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated RejectedAllocationAsk rejected = 4;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="applicationresponse">ApplicationResponse<a href="#applicationresponse" class="hash-link" aria-label="Direct link to ApplicationResponse" title="Direct link to ApplicationResponse" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message ApplicationResponse {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated RejectedApplication rejected = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated AcceptedApplication accepted = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated UpdatedApplication updated = 3;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_rsCK" id="noderesponse">NodeResponse<a href="#noderesponse" class="hash-link" aria-label="Direct link to NodeResponse" title="Direct link to NodeResponse" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">message NodeResponse {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated RejectedNode rejected = 1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  repeated AcceptedNode accepted = 2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="event-changes-for-updateresponse">Event Changes for UpdateResponse<a href="#event-changes-for-updateresponse" class="hash-link" aria-label="Direct link to Event Changes for UpdateResponse" title="Direct link to Event Changes for UpdateResponse" translate="no">​</a></h3>
<p>Scheduler/Context.go from Core already triggers an event for each entity separately and rmproxy.go is the one which handles all these events and packs it under single *si.UpdateResponse and eventually sends to shim through scheduler_callback#RecvUpdateResponse. With the above API interface change, rmproxy.go would use appropriate callback method to send response to shim. With this separate callback approach, each entity response would be handled separately in shim.</p>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="detailed-flow-analysis">Detailed Flow Analysis<a href="#detailed-flow-analysis" class="hash-link" aria-label="Direct link to Detailed Flow Analysis" title="Direct link to Detailed Flow Analysis" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="adddelete-allocations">Add/Delete Allocations<a href="#adddelete-allocations" class="hash-link" aria-label="Direct link to Add/Delete Allocations" title="Direct link to Add/Delete Allocations" translate="no">​</a></h3>
<p>The RM (shim) sends a simplified AllocationRequest as described above. This message is wrapped by the RM proxy and forwarded to the cache for processing. The RM can request an allocation to be added or removed.</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">1. Shim sends a simplified AllocationRequest to core through SchedulerAPI.UpdateAllocation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2. RMProxy sends rmevent.RMUpdateAllocationEvent to scheduler </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. On receiving the above event, scheduler calls context.handleRMUpdateAllocationEvent to do the </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   following:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.1: processAsks</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        2.1.2: Process each request.Asks ask of AllocationRequest request and adds to the application</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        2.1.2: In case of rejection, triggers RMRejectedAllocationAskEvent with </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        all asks which has been rejected</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        2.1.2: On receiving RMRejectedAllocationAskEvent, RMProxy.processUpdatePartitionConfigsEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        process the event, creates a AllocationResponse using RMRejectedAllocationAskEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        attributes and send to shim through UpdateAllocation callback method</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.2: processAskReleases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        2.2.1: Process each request.Releases.AllocationAsksToRelease ask release of AllocationRequest request </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        and removes from the application</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.3: processAllocationReleases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.3.1: Process each request.Releases.AllocationRelease allocation release of AllocationRequest </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        request and removes from the application</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.3.2: Collect all above exact released allocations and triggers RMReleaseAllocationEvent with all allocations needs to be released</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.3.3: On receiving RMReleaseAllocationEvent, RMProxy.processRMReleaseAllocationEvent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        prcoess the event, creates a AllocationResponse using RMReleaseAllocationEvent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        attributes and send to shim through UpdateAllocation callback method</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.3.4: Collect all above confirmed (placeholder swap &amp; preemption) allocations </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        and send to shim through two ways </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            a). Wraps confirmed allocations as AssumedAllocation </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            and send to shim ReSyncSchedulerCache callback plugin </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            b). Wraps confirmed allocations as Allocation and triggers </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            RMNewAllocationsEvent. On receiving RMNewAllocationsEvent, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            RMProxy.processAllocationUpdateEvent process the event, creates a </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            AllocationResponse using RMNewAllocationsEvent attributes and send to shim </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            through UpdateAllocation callback method</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="adddelete-applications">Add/Delete Applications<a href="#adddelete-applications" class="hash-link" aria-label="Direct link to Add/Delete Applications" title="Direct link to Add/Delete Applications" translate="no">​</a></h3>
<p>The RM (shim) sends a simplified ApplicationRequest as described above. This message is wrapped by the RM proxy and forwarded to the cache for processing. The RM can request an application to be added or removed.</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">1. Shim sends a simplified ApplicationRequest to core through SchedulerAPI.UpdateApplication</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2. RMProxy sends rmevent.RMUpdateApplicationEvent to scheduler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. On receiving the above event, scheduler calls context.handleRMUpdateApplicationEvent to do the </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   following:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.1: Add new apps to the partition. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.1.2: Wraps AcceptedApps and RejectedApps (if any) as part of RMApplicationUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        and fires the same</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.1.2: On receiving RMApplicationUpdateEvent, RMProxy.processApplicationUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        process the event, creates a ApplicationResponse using RMApplicationUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        attributes and send to shim through UpdateApplication callback method</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.2 Remove apps from the partition.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.2.1: Collect all allocations belongs to the removed app and triggers </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        RMReleaseAllocationEvent with all allocations needs to be released</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.2.2: On receiving RMReleaseAllocationEvent, RMProxy.processRMReleaseAllocationEvent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        prcoess the event, creates a AllocationResponse using RMReleaseAllocationEvent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        attributes and send to shim through UpdateAllocation callback method</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="adddelete-nodes">Add/Delete Nodes<a href="#adddelete-nodes" class="hash-link" aria-label="Direct link to Add/Delete Nodes" title="Direct link to Add/Delete Nodes" translate="no">​</a></h3>
<p>The RM (shim) sends a simplified NodeRequest as described above. This message is wrapped by the RM proxy and forwarded to the cache for processing. The RM can request an node to be added or removed.</p>
<div class="language-text codeBlockContainer_ZpQt theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_nuZN"><pre tabindex="0" class="prism-code language-text codeBlock_rvvD thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines__WR0"><span class="token-line" style="color:#bfc7d5"><span class="token plain">1. Shim sends a simplified NodeRequest to core through SchedulerAPI.UpdateNode</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2. RMProxy sends rmevent.RMUpdateNodeEvent to scheduler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. On receiving the above event, scheduler calls context.handleRMUpdateNodeEvent to do the </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   following:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.1: Add new node to the partition. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.1.2: Wraps AcceptedNodes and RejectedNodes (if any) as part of RMNodeUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        and fires the same</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.1.2: On receiving RMNodeUpdateEvent, RMProxy.processRMNodeUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        process the event, creates a NodeResponse using RMNodeUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        attributes and send to shim through UpdateNode callback method</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.2: Update node</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.2.1 Update the partition resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.3: Drain node</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.3.1 Ensures node is not schedulable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3.4: Decommissioning (Remove) node from the partition.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.4.1: Ensures node is not schedulable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.4.2: Collect all above exact released allocations from that node and triggers </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        RMReleaseAllocationEvent with all allocations needs to be released</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.4.3: On receiving RMReleaseAllocationEvent, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        RMProxy.processRMReleaseAllocationEvent process the event, creates a </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        AllocationResponse using RMReleaseAllocationEvent attributes and </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        send to shim through UpdateAllocation callback method</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        3.4.4: Collect all above confirmed (placeholder swap &amp; preemption) from that node </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        allocations and send to shim through two ways </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            a). Wraps confirmed allocations as AssumedAllocation and send to shim </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            through ReSyncSchedulerCache callback plugin </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            b). Wraps confirmed allocations as Allocation and triggers RMNewAllocationsEvent. </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            On receiving RMNewAllocationsEvent, RMProxy.processAllocationUpdateEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            process the event, creates a AllocationResponse using RMNewAllocationsEvent </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            attributes and send to shim through UpdateAllocation callback method</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_rsCK" id="breaking-the-shim-build-dependency-on-core">Breaking the Shim build dependency on Core<a href="#breaking-the-shim-build-dependency-on-core" class="hash-link" aria-label="Direct link to Breaking the Shim build dependency on Core" title="Direct link to Breaking the Shim build dependency on Core" translate="no">​</a></h2>
<p>Planned for different phases.</p>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="phase-1">Phase 1<a href="#phase-1" class="hash-link" aria-label="Direct link to Phase 1" title="Direct link to Phase 1" translate="no">​</a></h3>
<p>Moved all plugins from core to appropriate place in SI under ResourceManagerCallback,
a single common interface.</p>
<h3 class="anchor anchorTargetStickyNavbar_rsCK" id="phase-2">Phase 2<a href="#phase-2" class="hash-link" aria-label="Direct link to Phase 2" title="Direct link to Phase 2" translate="no">​</a></h3>
<p>Please refer <a href="https://issues.apache.org/jira/browse/YUNIKORN-930" target="_blank" rel="noopener noreferrer" class="">https://issues.apache.org/jira/browse/YUNIKORN-930</a> for more details</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.2.0/design/user_based_resource_usage_tracking"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">User Based Resource Usage Tracking</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.2.0/design/cache_removal"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scheduler cache removal design</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_PLqt thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#goals" class="table-of-contents__link toc-highlight">Goals</a></li><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#simplifying-interface-messages" class="table-of-contents__link toc-highlight">Simplifying Interface Messages</a><ul><li><a href="#api-interface-changes" class="table-of-contents__link toc-highlight">API Interface Changes</a></li><li><a href="#interface-changes-to-replace-updaterequest" class="table-of-contents__link toc-highlight">Interface Changes to replace UpdateRequest</a></li><li><a href="#merging-create-and-update-nodeinfo-into-single-nodeinfo" class="table-of-contents__link toc-highlight">Merging Create and Update NodeInfo into Single NodeInfo</a></li><li><a href="#event-changes-to-replace-updaterequest" class="table-of-contents__link toc-highlight">Event Changes to replace UpdateRequest</a></li><li><a href="#interface-changes-to-replace-updateresponse" class="table-of-contents__link toc-highlight">Interface Changes to replace UpdateResponse</a></li><li><a href="#event-changes-for-updateresponse" class="table-of-contents__link toc-highlight">Event Changes for UpdateResponse</a></li></ul></li><li><a href="#detailed-flow-analysis" class="table-of-contents__link toc-highlight">Detailed Flow Analysis</a><ul><li><a href="#adddelete-allocations" class="table-of-contents__link toc-highlight">Add/Delete Allocations</a></li><li><a href="#adddelete-applications" class="table-of-contents__link toc-highlight">Add/Delete Applications</a></li><li><a href="#adddelete-nodes" class="table-of-contents__link toc-highlight">Add/Delete Nodes</a></li></ul></li><li><a href="#breaking-the-shim-build-dependency-on-core" class="table-of-contents__link toc-highlight">Breaking the Shim build dependency on Core</a><ul><li><a href="#phase-1" class="table-of-contents__link toc-highlight">Phase 1</a></li><li><a href="#phase-2" class="table-of-contents__link toc-highlight">Phase 2</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.cloudera.com/yunikorn-a-universal-resources-scheduler/" target="_blank" rel="noopener noreferrer" class="footer__link-item">What&#x27;s YuniKorn?<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Spark on Kubernetes – Gang Scheduling with YuniKorn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Code Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/apache/yunikorn-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core scheduler<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes shim<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="footer__link-item">Scheduler Interface<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-web" target="_blank" rel="noopener noreferrer" class="footer__link-item">WEB application<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-site" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get_involved">Get Involved</a></li><li class="footer__item"><a class="footer__link-item" href="/community/people">People</a></li><li class="footer__item"><a href="https://issues.apache.org/jira/projects/YUNIKORN/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_pbeM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<div style="font-size: 70%">
Copyright © 2020-2026 <a href="https://www.apache.org/">The Apache Software Foundation</a>. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. <br>
<div style="padding:20px; margin: 10px; color: #4d4d4d;">
<p>The Apache Software Foundation Apache YuniKorn, YuniKorn, Apache, the Apache feather, and the Apache YuniKorn project logo are either registered trademarks or trademarks of the Apache Software Foundation.</p>
</div>
</div></div></div></div></footer></div>
</body>
</html>
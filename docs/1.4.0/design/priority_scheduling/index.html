<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.4.0 docs-doc-page docs-doc-id-design/priority_scheduling" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Priority Scheduling | Apache YuniKorn</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-rh="true" name="twitter:image" content="https://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-rh="true" property="og:url" content="https://yunikorn.apache.org/docs/1.4.0/design/priority_scheduling"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.4.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.4.0"><meta data-rh="true" name="docsearch:version" content="1.4.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.4.0"><meta data-rh="true" property="og:title" content="Priority Scheduling | Apache YuniKorn"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/yunikorn.ico"><link data-rh="true" rel="canonical" href="https://yunikorn.apache.org/docs/1.4.0/design/priority_scheduling"><link data-rh="true" rel="alternate" href="https://yunikorn.apache.org/docs/1.4.0/design/priority_scheduling" hreflang="en"><link data-rh="true" rel="alternate" href="https://yunikorn.apache.org/docs/1.4.0/design/priority_scheduling" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q1V951BG2V-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Apache YuniKorn" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.57f4caef.css">
<script src="/assets/js/runtime~main.377003fc.js" defer="defer"></script>
<script src="/assets/js/main.1ba8fec7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fIH8" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar__FTF" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_wDNR"></div><div class="content_DgxC announcementBarContent_HmXy">1.5.1 has been released, check the <a href="/community/download">DOWNLOADS</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_KmNL announcementBarClose_BG67"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo/yunikorn_blue_logo.png" alt="YuniKorn Site Logo" class="themedComponent_yzub themedComponent--light_pOwb"><img src="/img/logo/yunikorn_white_logo.png" alt="YuniKorn Site Logo" class="themedComponent_yzub themedComponent--dark_xdnF"></div><b class="navbar__title text--truncate">Apache YuniKorn</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/community/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/community/download">Download</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get_involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/how_to_contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/community/coding_guidelines">Coding Guidelines</a></li><li><a class="dropdown__link" href="/community/reporting_issues">Reporting Issues</a></li><li><a class="dropdown__link" href="/community/release_procedure">Release Procedure</a></li><li><a class="dropdown__link" href="/community/events">Events</a></li><li><a class="dropdown__link" href="/community/people">People</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apache Software Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy Policy<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.4.0/">1.4.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/design/priority_scheduling">Next</a></li><li><a class="dropdown__link" href="/docs/design/priority_scheduling">1.5.1</a></li><li><a class="dropdown__link" href="/docs/1.5.0/design/priority_scheduling">1.5.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.4.0/design/priority_scheduling">1.4.0</a></li><li><a class="dropdown__link" href="/docs/1.3.0/design/priority_scheduling">1.3.0</a></li><li><a class="dropdown__link" href="/docs/1.2.0/design/priority_scheduling">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.0/">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.0/">1.0.0</a></li><li><a class="dropdown__link" href="/docs/0.12.2/">0.12.2</a></li><li><a class="dropdown__link" href="/docs/0.12.1/">0.12.1</a></li><li><a class="dropdown__link" href="/docs/0.11.0/">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.0/">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/">0.8.0</a></li></ul></div><a href="https://github.com/apache/yunikorn-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_CXxL colorModeToggle_r3Ku"><button class="clean-btn toggleButton_A2Gq toggleButtonDisabled_MBgh" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_ZNXA"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon__KEK"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_eonw"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_txSM"><div class="docsWrapper_aujV"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_fDTy" type="button"></button><div class="docRoot_ITF8"><aside class="theme-doc-sidebar-container docSidebarContainer_coE9"><div class="sidebarViewport_XDus"><div class="sidebar_duME"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_d40_ menuWithAnnouncementBar_QXd6"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.4.0/">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.4.0/user_guide/deployment_modes">User Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/1.4.0/developer_guide/env_setup">Developer Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/developer_guide/env_setup">Dev Environment Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/developer_guide/build">Build and Run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/developer_guide/dependencies">Go module updates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/developer_guide/deployment">Deploy to Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/developer_guide/openshift_development">Development in CodeReady Containers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/1.4.0/design/architecture">Designs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/scheduler_plugin">K8s Scheduler Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/gang_scheduling">Gang scheduling design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/user_group">User/Group handling and lookup design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/user_based_resource_usage_tracking">User Based Resource Usage Tracking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/user_group_resource_usage_enforcement">User Based Quota Enforcement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/historical_usage_tracking">Historical Usage Tracking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/interface_message_simplification">Simplifying Interface Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/cache_removal">Scheduler cache removal design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/preemption">Preemption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/simple_preemptor">DaemonSet Scheduling using Simple Preemptor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/generic_resource">Generic Resource Types in Namespace Quota</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.4.0/design/priority_scheduling">Priority Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/resilience">Resilience</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/state_aware_scheduling">Batch Workloads Ordering with StateAware Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/scheduler_object_states">Scheduler Object States</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/config_v2">Configuration V2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/design/scheduler_configuration">Scheduler Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/1.4.0/archived_design/k8shim">Archived Designs</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.4.0/performance/evaluate_perf_function_with_kubemark">Performance</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_fQ9A"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_L8rf"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache YuniKorn<!-- --> <b>1.4.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/design/priority_scheduling">latest version</a></b> (<!-- -->1.5.1<!-- -->).</div></div><div class="docItemContainer_J6oa"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__4Nk" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_lw5W"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Designs</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Priority Scheduling</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.4.0</span><div class="tocCollapsible_hejs theme-doc-toc-mobile tocMobile_K3aG"><button type="button" class="clean-btn tocCollapsibleButton_a3TS">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Priority Scheduling</h1></header><h2 class="anchor anchorWithStickyNavbar_NlAN" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Currently, YuniKorn can sort at two levels: the applications in a queue and
the resource requests within the application. The queue sorting policy is
configurable and supports a <em>Fair</em> or <em>FIFO</em> policy. <em>StateAware</em> is
considered a filtered <em>FIFO</em> policy. Applications cannot be sorted based
on priority.</p>
<p>Within an application, requests are sorted based on priority of the requests.
For requests that have the same priority the submission time is used as a
secondary sort key. Requests are sorted in <em>FIFO</em> order if they have the
same priority. Note that the priority of requests was not propagated from
the shim to the core until
<a href="https://issues.apache.org/jira/browse/YUNIKORN-1235" target="_blank" rel="noopener noreferrer">YUNIKORN-1235</a> was
implemented in v1.0.0. Until that implementation all requests were created
with the <em>default</em> priority.</p>
<p>Additionally, Kubernetes uses priority as a sort when performing preemption.
YuniKorn currently only does preemption of requests if a node-specific task
needs to be scheduled (i.e. a DaemonSet pod,
<a href="https://issues.apache.org/jira/browse/YUNIKORN-1085" target="_blank" rel="noopener noreferrer">YUNIKORN-1085</a>).</p>
<h2 class="anchor anchorWithStickyNavbar_NlAN" id="goals">Goals<a href="#goals" class="hash-link" aria-label="Direct link to Goals" title="Direct link to Goals">​</a></h2>
<ul>
<li>Attempt to be compatible with Kubernetes standard priority handling
wherever possible</li>
<li>Priority should be orthogonal to application sorting policies (i.e.
<em>Fair</em>, <em>FIFO</em> and <em>StateAware</em> policies should support prioritization)</li>
<li>It should be possible to limit the scope of priority handling</li>
<li>Design of priority scheduling should consider the impact on preemption
design</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_NlAN" id="non-goals">Non Goals<a href="#non-goals" class="hash-link" aria-label="Direct link to Non Goals" title="Direct link to Non Goals">​</a></h2>
<ul>
<li>Design of preemption</li>
<li>Change AllocationAsk sorting within an application</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_NlAN" id="definitions">Definitions<a href="#definitions" class="hash-link" aria-label="Direct link to Definitions" title="Direct link to Definitions">​</a></h2>
<p>The following terms are defined as follows and will be used throughout this
document.</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="priority">Priority<a href="#priority" class="hash-link" aria-label="Direct link to Priority" title="Direct link to Priority">​</a></h3>
<p>Priority is a numeric value associated with an Ask. Higher-priority asks have
higher numeric values. To be compatible with Kubernetes, all 32-bit signed
integers are considered valid priorities. An ask without a specific defined
priority is assumed to have the default priority.</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="minimum-priority">Minimum Priority<a href="#minimum-priority" class="hash-link" aria-label="Direct link to Minimum Priority" title="Direct link to Minimum Priority">​</a></h3>
<p>Minimum priority is defined as the lowest possible priority, or
<code>-2,147,483,648</code> (- 2<sup>31</sup>).</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="maximum-priority">Maximum Priority<a href="#maximum-priority" class="hash-link" aria-label="Direct link to Maximum Priority" title="Direct link to Maximum Priority">​</a></h3>
<p>Maximum priority is defined as the highest possible priority, or
<code>2,147,483,647</code> (2<sup>31</sup> - 1). Note that Kubernetes does not permit
custom priority classes (see below) to define priorities greater than
<code>1,000,000,000</code> (1 billion). Values higher are reserved for system-level
priorities.</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="default-priority">Default Priority<a href="#default-priority" class="hash-link" aria-label="Direct link to Default Priority" title="Direct link to Default Priority">​</a></h3>
<p>Default priority is defined as the value <code>0</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="priorityclass">PriorityClass<a href="#priorityclass" class="hash-link" aria-label="Direct link to PriorityClass" title="Direct link to PriorityClass">​</a></h3>
<p>A <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#priorityclass" target="_blank" rel="noopener noreferrer">PriorityClass</a>
is a Kubernetes object which maps between a priority name and an integer
priority value. The name cannot start with <code>system-</code> as that prefix is
reserved for Kubernetes internal usage.</p>
<p>Additionally, a <code>preemptionPolicy</code> may be set on a PriorityClass. Official
GA support was added in Kubernetes 1.24. The preemption policy is only
used while scheduling the pod itself. It is not taken into account after
the pod is scheduled.</p>
<p>The policy defaults to <code>Never</code>, implying that pods of this priority will
never preempt other pods. <code>PreemptLowerPriority</code> is also possible, which
allows the scheduler to preempt pods with lower priority values.</p>
<p>When a pod is submitted with its <code>priorityClassName</code> set to a valid priority
class, a Kubernetes-provided admission controller will automatically update
the <code>priority</code> and <code>preemptionPolicy</code> fields of the pod to match those of the
referenced PriorityClass. Pods that specify a priority as part of the
specification are rejected if the integer value set on the pod does not match
the PriorityClass value.</p>
<h4 class="anchor anchorWithStickyNavbar_NlAN" id="pre-defined-priorityclass-objects">Pre-defined PriorityClass objects<a href="#pre-defined-priorityclass-objects" class="hash-link" aria-label="Direct link to Pre-defined PriorityClass objects" title="Direct link to Pre-defined PriorityClass objects">​</a></h4>
<ul>
<li>system-cluster-critical: <code>2,000,000,000</code></li>
<li>system-node-critical: <code>2,000,000,100</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_NlAN" id="current-state">Current state<a href="#current-state" class="hash-link" aria-label="Direct link to Current state" title="Direct link to Current state">​</a></h2>
<p>The framework for priority is minimally implemented within YuniKorn. The
<em>AllocationAsk</em> structure within the scheduler interface already contains a
<em>priority</em> field which is populated by the shim based on the <em>priority</em> field
on a Pod.</p>
<p>One priority can be set on creation of the <em>AllocationAsk</em>. Each
<em>AllocationAsk</em> within an application may have its own priority.
<em>AllocationAsk</em> sorting is based on this priority. This means that within the
application asks or pods are sorted based on priority. High-priority asks will
be scheduled before low-priority asks.</p>
<p>Priorities are currently also used for the minimal DaemonSet preemption process
implemented in <a href="https://issues.apache.org/jira/browse/YUNIKORN-1085" target="_blank" rel="noopener noreferrer">YUNIKORN-1085</a>.
Possible victims are sorted based on their priority among other things. The
priority of the <em>Allocation</em> is the same as the <em>AllocationAsk</em> they
represent.</p>
<p>One use of the capability to set a priority for each <em>AllocationAsk</em> could be to
enable dynamic allocations such as those utilized by Apache Spark. An
application can submit a set of asks at high priority that will be scheduled
as soon as possible, and a set of lower-priority asks that can be used for
additional capacity if available.</p>
<h2 class="anchor anchorWithStickyNavbar_NlAN" id="proposal">Proposal<a href="#proposal" class="hash-link" aria-label="Direct link to Proposal" title="Direct link to Proposal">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="priority-fencing">Priority fencing<a href="#priority-fencing" class="hash-link" aria-label="Direct link to Priority fencing" title="Direct link to Priority fencing">​</a></h3>
<p>By default, priority applies across queues globally. In other words, a
higher-priority ask will be attempted to be satisfied before a lower-priority
ask regardless of which queue the asks reside in.</p>
<p>However, it is often useful to limit the scope of priority handling. For
example, it may be desirable to limit the ability of asks in one area of the
queue hierarchy from jumping ahead of asks in another area. To support this,
we add the concept of a <em>Priority Fence</em>. A queue (either <em>leaf</em> or <em>parent</em>)
may be configured as priority-fenced, which prevents priorities from
propagating upward.</p>
<p>If a queue is fenced, asks within that queue (and subqueues) will be
prioritized relative to each other, but not relative to asks in other portions
of the queue hierarchy. A priority fence is a YuniKorn queue subtree boundary
above which priorities are no longer considered. A priority fenced queue does
not expose priority levels of its children to its parent queue, thereby
ensuring that priorities are only considered within that queue and its
descendants.</p>
<p>Priority fences may be nested; for example a fenced queue <code>tenant 1</code> may have
child queues <code>queue A</code> (fenced) and <code>queue B</code> (unfenced). In this case tasks
in <code>queue A</code> will show as the default priority and will not be prioritized
above <code>queue B</code>, but tasks in <code>queue B</code> may be prioritized over those in
<code>queue A</code>. In no case will tasks in either queue be prioritized over tasks
outside the scope of queue <code>tenant 1</code>, as they show as the default priority
(shown in the diagram below with yellow arrows).</p>
<p>A similar setup is created for the <code>tenant 2</code> queue. However in this case the
priorities from <code>queue 1</code> to <code>queue 2</code> and vice-versa are fully visible
(shown in the diagram below with blue arrows).</p>
<p>None of the tasks running in the queues below <code>tenant 1</code> or <code>tenant 2</code> can be
prioritized above the <code>system</code> queue. Tasks in the <code>system</code> queue are not
fenced. That means that a task in the <code>system</code> queue can be prioritized above
any queue in the hierarchy (shown in the diagram below with red arrows).</p>
<p><img decoding="async" loading="lazy" alt="priority flows" src="/assets/images/priority-flows-a6d25ccb858c715c6711ed1630aefd27.png" width="1968" height="774" class="img_qdMO"></p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="priority-offset">Priority offset<a href="#priority-offset" class="hash-link" aria-label="Direct link to Priority offset" title="Direct link to Priority offset">​</a></h3>
<p>Priorities need to be pre-defined at the cluster level via the PriorityClass
objects. At the Kubernetes level there is no way to limit which priorities can
be used in which part of the system. The only exception to that rule are the
pre-defined system priorities from the Kubernetes system itself. This does not
give an administrator a lot of control.</p>
<p>Prioritizing a specific queue above another queue based on the priorities of
the tasks inside the queue is thus difficult. Any user can start a task with
any priority anywhere in the cluster. To allow an administrator more control
we need to be able to steer, or augment, the priority of a queue. To
accomplish this, we introduce the <code>priority.offset</code> property of a queue.</p>
<p>The <code>priority.offset</code> property on a queue allows the administrator to increase
(or decrease) a queue&#x27;s priority. By using the offset a queue can be boosted
to become a high-priority queue. It also can be used to decrease the priority
compared to its siblings.</p>
<p>As a general rule: the priority of a <em>leaf</em> queue is equal to the maximum
priority of the AllocationAsks in that queue, plus the <code>priority.offset</code>
value. The priority of a <em>parent</em> queue is the maximum of the priority of its
child queues plus the <code>priority.offset</code> value. This means that priority
offsets are additive when traversing up the queue hierarchy. A priority offset
may be any valid signed <code>int32</code> value. The offset is applied after the dynamic
priority for the queue is calculated.</p>
<p>As a note of caution: a side effect of a very large offset value for a queue
could result in all pods in that queue being clamped at the maximum priority
level or exceeding the priority of Kubernetes system priority classes. This
could then adversely impact the scheduling of node and or cluster critical
pods in sibling queues. This effect needs to be clearly documented. Logging a
warning about a configured value that high should also be considered.</p>
<p>A second option that was considered is limiting the offset value to
<code>999,999,999</code>. This would prevent the offset priority from exceeding the
pre-defined system priorities. This would be a safe option but does not take
into account the fact that we can have negative priorities that we want to
offset. The current choice is to go with the first option to document and log.</p>
<p>Fencing affects the priority calculation for the queue. When a queue is
fenced (i.e. the <code>priority.policy</code> is set to <code>fence</code>), queue priority
calculations are disabled for that queue. The result of application priority
or child queue calculations are ignored for a fenced queue. The priority of
the fenced queue is always set to the default priority or to the priority
offset, if specified.</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="extended-application-sorting">Extended application sorting<a href="#extended-application-sorting" class="hash-link" aria-label="Direct link to Extended application sorting" title="Direct link to Extended application sorting">​</a></h3>
<p>Applications are currently sorted based on one of the defined application
sorting policies. All application sorting policies only take into account
applications that have pending requests.</p>
<p>Currently defined are <em>Fair</em>, <em>FIFO</em>, and <em>StateAware</em>:</p>
<ul>
<li><em>Fair</em> sorting sorts based on relative usage within a queue</li>
<li><em>FIFO</em> sorts applications by creation time in a first-in, first-out manner</li>
<li><em>StateAware</em> is similar to <em>FIFO</em> except that only a single &quot;new&quot;
application is allowed at once (this is an over-simplification, but will
suffice here)</li>
</ul>
<p>To support priority scheduling, the policies <em>Fair</em> and <em>FIFO</em> will get an
equivalent policy that considers the priority of an application first. For
applications that have the same priority, sorting will then fall back to the
secondary sort criteria (<em>Fair</em> or <em>FIFO</em>).</p>
<p><em>StateAware</em> as a special form of <em>FIFO</em> will however always filter
applications first and then sort. A priority based version of <em>StateAware</em>
must change the way it filters. The single &quot;new&quot; application that is
considered can no longer be the oldest application. That would be a major
behavioral change from the current policy.</p>
<p>The existing policies will not be changed to maintain backwards
compatibility. None of the existing policies have a tiebreak built in. In
the case the comparison returns equality the order of the elements is not
changed.</p>
<p>Instead of introducing new policies to add priority to the existing
behavior a flag will be added that allows switching priorities on or off.
The property will be added to the queue.</p>
<p>New property: <code>appication.sort.priority</code></p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="extended-queue-sorting">Extended queue sorting<a href="#extended-queue-sorting" class="hash-link" aria-label="Direct link to Extended queue sorting" title="Direct link to Extended queue sorting">​</a></h3>
<p>Queue sorting currently only supports one policy: <em>Fair</em>. Queues cannot
be sorted using a <em>FIFO</em> mechanism. <em>FIFO</em> sorting of queues is not in
scope of this design. However the design has allowed for a simple addition
of a new policy.</p>
<p>The <em>Fair</em> policy works similarly to application <em>Fair</em> sorting, except
that it sorts based on usage ratios between two queues. Allocations are
compared to guaranteed resources. This results in the queue furthest below
its guaranteed resource to be first in the sorted queue list as it is
considered &quot;more starved&quot;. For queues that have the same usage ratio,
the queue with the highest pending requests is considered more starved.</p>
<p>To add priority support, a new property will be added to consider the
current queue priority as the main sorting factor. To break the tie between
queues with the same priority, starvation like in the <em>Fair</em> policy will be
used. Again breaking the tie for queues with the same <em>Fair</em> usage using the
pending requests.</p>
<p>The existing policy will not be changed to maintain backwards compatibility.
The same property as used for application sorting will be reused to control
priority behavior.</p>
<p>New property: <code>application.sort.priority</code></p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="priority-configuration">Priority Configuration<a href="#priority-configuration" class="hash-link" aria-label="Direct link to Priority Configuration" title="Direct link to Priority Configuration">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_NlAN" id="queue-configuration">Queue Configuration<a href="#queue-configuration" class="hash-link" aria-label="Direct link to Queue Configuration" title="Direct link to Queue Configuration">​</a></h4>
<p>Three new attributes will be added to the queue configuration object to allow
specifying the priority fence type and priority offset and priority sorting.
All properties <code>priority.policy</code>, <code>priority.offset</code>, and
<code>application.sort.priority</code>, can be set on any queue. The attributes are part
of the queue properties as follows:</p>
<div class="language-yaml codeBlockContainer_l7z8 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_N19i"><pre tabindex="0" class="prism-code language-yaml codeBlock_adB6 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_fSw7"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">queues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fencedqueue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">priority.policy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fence</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">priority.offset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">application.sort.priority</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> enabled</span><br></span></code></pre><div class="buttonGroup_ZiWg"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Gl1a" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mJ2i"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_rLlY"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>priority.policy</code> and <code>priority.offset</code> fields are not inherited from the
parent queue to a child queue; they apply only to the queue they are specified
on.</p>
<p>Note that the <code>application.sort.priority</code> field is only inherited if the value
is set to <code>disabled</code> (the <code>enabled</code> value is already the default). This allows
priorities to be ignored for an entire queue subtree by setting the property
on the parent queue.</p>
<p>Properties are fully supported in child templates. Support for setting these
properties for dynamic queues is included as part of the existing
functionality.</p>
<p>The supported, not case sensitive, values for the <code>application.sort.priority</code>
are:</p>
<ul>
<li><code>enabled</code></li>
<li><code>disabled</code></li>
</ul>
<p>The proposal is to default to <code>enabled</code> for the <code>application.sort.priority</code>
property. Given that the Kubernetes default scheduler and preemption support
are all based on priorities that choice seems more logical than <code>disabled</code>.</p>
<p>The <code>application.sort.priority</code> when set on a <em>parent</em> queue affects the way
the queues are sorted. It will change queue sorting from the standard <em>Fair</em>
sorting to priority-based sorting. To break the tie for equal priority
queues it will use the <em>Fair</em> comparison. When set on a <em>leaf</em> queue it will
change the application sorting itself. All three existing policies will be
supported with <code>application.sort.priority</code> set to <code>enabled</code> or <code>disabled</code>.
For the <code>disabled</code> case nothing will change and the old behavior is
maintained. For the <code>enabled</code> case the primary sort will be priority and the
configured policy (<em>Fair</em>, <em>FIFO</em>,  or <em>StateAware</em>) will be used as
tiebreakers.</p>
<p>The <code>priority.policy</code> and <code>priority.offset</code> can be set on the <code>root</code> queue
but have no effect. The root <code>queue</code> as the top of the hierarchy has no
parent. This means priority cannot traverse further up the tree. No messages
will be logged if the <code>priority.policy</code> or <code>priority.offset</code> are set on the
<code>root</code> queue.</p>
<p>The supported, not case sensitive, values for the <code>priority.policy</code> are:</p>
<ul>
<li><code>default</code></li>
<li><code>fence</code></li>
</ul>
<p>If the value <code>fence</code> is set on a queue, the queue on which the property is
set does not propagate its priority outside of the queue&#x27;s subtree. The value
<code>default</code> does not fence the queue. If no policy is set the value <code>default</code> is
used.</p>
<p>The <code>priority.offset</code> value must be a valid integer in string form. The value
will be converted into an integer using the standard parsing methods as defined
via: <a href="https://pkg.go.dev/strconv#ParseInt" target="_blank" rel="noopener noreferrer"><code>strconv.ParseInt</code></a><code>(s, 10, 32)</code>.</p>
<p>If no <code>priority.offset</code> property is specified in the queue the default of <code>0</code>
is used. Specifying the property with an empty value is equivalent to <code>0</code>. If
parsing of the string fails the default of <code>0</code> is used.</p>
<h3 class="anchor anchorWithStickyNavbar_NlAN" id="scheduler-storage-object-changes">Scheduler storage object changes<a href="#scheduler-storage-object-changes" class="hash-link" aria-label="Direct link to Scheduler storage object changes" title="Direct link to Scheduler storage object changes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_NlAN" id="application">Application<a href="#application" class="hash-link" aria-label="Direct link to Application" title="Direct link to Application">​</a></h4>
<p>The <em>Application</em> object within the scheduler core will be updated with a
dynamic priority value, defined as the maximum priority of all pending asks.
To avoid sorting performance degradation, this value should be cached and
recomputed only when allocation asks are added, allocated, or removed.</p>
<p>This recalculation can be avoided in many instances. When new asks are added,
an application&#x27;s priority need not be recalculated unless the priority of the
new ask is greater than that of the application as a whole. Similarly, when
removing an ask, the priority need not be adjusted unless the ask&#x27;s priority
is equal to the application&#x27;s priority. When recalculating priority due to
adding a high-priority ask, the application&#x27;s priority can simply be set to
the new ask&#x27;s priority. When recalculating due to removal of an ask of equal
priority to the application, we can stop considering additional asks as soon
as any other ask of equal priority is encountered. This means that the
performance impact of application priority updates will be <code>O(1)</code> when adding
an ask, and at worst <code>O(n)</code> when removing an ask.</p>
<p>New field: <code>askMaxPriority</code></p>
<h4 class="anchor anchorWithStickyNavbar_NlAN" id="queue">Queue<a href="#queue" class="hash-link" aria-label="Direct link to Queue" title="Direct link to Queue">​</a></h4>
<p>The new configuration values need to be maintained on the queue. Besides those
values the <em>Queue</em> object within the scheduler core will be updated with a
dynamic priority value. This dynamic priority will be defined as the maximum
priority of all applications within the queue, plus any &quot;priority offset&quot;
configured.</p>
<p>To avoid sorting performance degradation, this value should be cached and
recomputed only when necessary. For a <em>leaf</em> queue, this is required if
application priorities in the queue have changed, and for a <em>parent</em> queue this
is required if the priorities of child queues have changed.</p>
<p>New fields: <code>priorityPolicy</code>, <code>priorityOffset</code>, <code>currentPriority</code></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.4.0/design/generic_resource"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Generic Resource Types in Namespace Quota</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.4.0/design/resilience"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Resilience</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_odww thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#goals" class="table-of-contents__link toc-highlight">Goals</a></li><li><a href="#non-goals" class="table-of-contents__link toc-highlight">Non Goals</a></li><li><a href="#definitions" class="table-of-contents__link toc-highlight">Definitions</a><ul><li><a href="#priority" class="table-of-contents__link toc-highlight">Priority</a></li><li><a href="#minimum-priority" class="table-of-contents__link toc-highlight">Minimum Priority</a></li><li><a href="#maximum-priority" class="table-of-contents__link toc-highlight">Maximum Priority</a></li><li><a href="#default-priority" class="table-of-contents__link toc-highlight">Default Priority</a></li><li><a href="#priorityclass" class="table-of-contents__link toc-highlight">PriorityClass</a></li></ul></li><li><a href="#current-state" class="table-of-contents__link toc-highlight">Current state</a></li><li><a href="#proposal" class="table-of-contents__link toc-highlight">Proposal</a><ul><li><a href="#priority-fencing" class="table-of-contents__link toc-highlight">Priority fencing</a></li><li><a href="#priority-offset" class="table-of-contents__link toc-highlight">Priority offset</a></li><li><a href="#extended-application-sorting" class="table-of-contents__link toc-highlight">Extended application sorting</a></li><li><a href="#extended-queue-sorting" class="table-of-contents__link toc-highlight">Extended queue sorting</a></li><li><a href="#priority-configuration" class="table-of-contents__link toc-highlight">Priority Configuration</a></li><li><a href="#scheduler-storage-object-changes" class="table-of-contents__link toc-highlight">Scheduler storage object changes</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.cloudera.com/yunikorn-a-universal-resources-scheduler/" target="_blank" rel="noopener noreferrer" class="footer__link-item">What&#x27;s YuniKorn?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Spark on Kubernetes – Gang Scheduling with YuniKorn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Code Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/apache/yunikorn-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core scheduler<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes shim<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="footer__link-item">Scheduler Interface<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-web" target="_blank" rel="noopener noreferrer" class="footer__link-item">WEB application<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/yunikorn-site" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get_involved">Get Involved</a></li><li class="footer__item"><a class="footer__link-item" href="/community/people">People</a></li><li class="footer__item"><a href="https://issues.apache.org/jira/projects/YUNIKORN/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_n0Rw"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
<div style="font-size: 70%">
Copyright © 2020-2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. <br>
<div style="padding:20px; margin: 10px; color: #4d4d4d;">
<p>The Apache Software Foundation Apache YuniKorn, YuniKorn, Apache, the Apache feather, and the Apache YuniKorn project logo are either registered trademarks or trademarks of the Apache Software Foundation.</p>
</div>
</div></div></div></div></footer></div>
</body>
</html>
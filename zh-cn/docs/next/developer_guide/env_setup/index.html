<!doctype html>
<html class="docs-version-current" lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="search" type="application/opensearchdescription+xml" title="Apache YuniKorn (Incubating)" href="/zh-cn/opensearch.xml"><title data-react-helmet="true">Dev Environment Setup | Apache YuniKorn (Incubating)</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://yunikorn.apache.org/zh-cn/img/logo/yunikorn-logo-main.png"><meta data-react-helmet="true" name="twitter:image" content="https://yunikorn.apache.org/zh-cn/img/logo/yunikorn-logo-main.png"><meta data-react-helmet="true" property="og:url" content="https://yunikorn.apache.org/zh-cn/docs/next/developer_guide/env_setup"><meta data-react-helmet="true" name="docsearch:language" content="zh-cn"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Dev Environment Setup | Apache YuniKorn (Incubating)"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="icon" href="/zh-cn/img/yunikorn.ico"><link data-react-helmet="true" rel="canonical" href="https://yunikorn.apache.org/zh-cn/docs/next/developer_guide/env_setup"><link data-react-helmet="true" rel="alternate" href="https://yunikorn.apache.org/docs/next/developer_guide/env_setup" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yunikorn.apache.org/zh-cn/docs/next/developer_guide/env_setup" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://yunikorn.apache.org/docs/next/developer_guide/env_setup" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh-cn/assets/css/styles.c772c344.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.18d1a2dd.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.ee0addbe.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">0.12.1 has been released, check the DOWNLOADS</div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/img/logo/yunikorn_blue_logo.png" alt="YuniKorn Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/zh-cn/img/logo/yunikorn_white_logo.png" alt="YuniKorn Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Apache YuniKorn</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-cn/docs/">Âø´ÈÄüÂºÄÂßã</a><a class="navbar__item navbar__link" href="/zh-cn/community/roadmap">Ë∑ØÁ∫øÂõæ</a><a class="navbar__item navbar__link" href="/zh-cn/community/download">‰∏ãËΩΩ</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Á§æÂå∫</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-cn/community/get_involved">ËøõË°åÂèÇ‰∏é</a></li><li><a class="dropdown__link" href="/zh-cn/community/how_to_contribute">Â¶Ç‰ΩïË¥°ÁåÆ</a></li><li><a class="dropdown__link" href="/zh-cn/community/coding_guidelines">ÁºñÁ†ÅÊåáÂçó</a></li><li><a class="dropdown__link" href="/zh-cn/community/reporting_issues">Êä•ÂëäÈóÆÈ¢ò</a></li><li><a class="dropdown__link" href="/zh-cn/community/events">‰∫ã‰ª∂</a></li><li><a class="dropdown__link" href="/zh-cn/community/people">‰∫∫Âëò</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>ApacheËΩØ‰ª∂Âü∫Èáë‰ºö<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>ApacheÂ≠µÂåñÈ°πÁõÆ<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>‰∫ã‰ª∂<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>ËµûÂä©ÂïÜ<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>ËµûÂä©<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/zh-cn/docs">ÊñáÊ°£</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh-cn/docs/next/">Master</a></li><li><a class="dropdown__link" href="/zh-cn/docs/">0.12.1</a></li><li><a class="dropdown__link" href="/zh-cn/docs/0.11.0/">0.11.0</a></li><li><a class="dropdown__link" href="/zh-cn/docs/0.10.0/">0.10.0</a></li><li><a class="dropdown__link" href="/zh-cn/docs/0.9.0/">0.9.0</a></li><li><a class="dropdown__link" href="/zh-cn/docs/0.8.0/">0.8.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>‰∏≠Êñá</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/developer_guide/env_setup" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh-cn/docs/next/developer_guide/env_setup" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">‰∏≠Êñá</a></li></ul></div><a href="https://github.com/apache/incubator-yunikorn-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_HJBl"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/zh-cn/docs/next/">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/zh-cn/docs/next/user_guide/queue_config">User Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/zh-cn/docs/next/developer_guide/env_setup">Developer Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-cn/docs/next/developer_guide/env_setup">Dev Environment Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/next/developer_guide/build">Build and Run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/next/developer_guide/deployment">Deploy to Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/next/developer_guide/openshift_development">Development in CodeReady Containers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/zh-cn/docs/next/design/architecture">Designs</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/zh-cn/docs/next/performance/evaluate_perf_function_with_kubemark">Performance</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Apache YuniKorn (Incubating)<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/zh-cn/docs/developer_guide/env_setup">latest version</a></b> (<!-- -->0.12.1<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Next</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dev Environment Setup</h1></header><p>There are several ways to setup a local development environment for Kubernetes, the two most common ones are <code>Minikube</code> (<a href="https://kubernetes.io/docs/setup/minikube/" target="_blank" rel="noopener noreferrer">docs</a>) and <code>docker-desktop</code>.
<code>Minikube</code> provisions a local Kubernetes cluster on several Virtual Machines (via VirtualBox or something similar). <code>docker-desktop</code> on the other hand, sets up Kubernetes cluster in docker containers.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="local-kubernetes-cluster-using-docker-desktop">Local Kubernetes cluster using Docker Desktop<a class="hash-link" href="#local-kubernetes-cluster-using-docker-desktop" title="Direct link to heading">‚Äã</a></h2><p>In this tutorial, we will base all the installs on Docker Desktop.
Even in this case we can use a lightweight <a href="#local-kubernetes-cluster-with-minikube">minikube</a> setup which gives the same functionality with less impact.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">‚Äã</a></h3><p>Download and install <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">Docker-Desktop</a> on your laptop. Latest version has an embedded version of Kubernetes so no additional install is needed.
Just simply follow the instruction <a href="https://docs.docker.com/docker-for-mac/#kubernetes" target="_blank" rel="noopener noreferrer">here</a> to get Kubernetes up and running within docker-desktop.</p><p>Once Kubernetes is started in docker desktop, you should see something similar below:</p><p><img alt="Kubernetes in Docker Desktop" src="/zh-cn/assets/images/docker-desktop-7afa28a7972e0e8867bcab8a6a9ac614.png"></p><p>This means that:</p><ol><li>Kubernetes is running.</li><li>the command line tool <code>kubctl</code> is installed in the <code>/usr/local/bin</code> directory.</li><li>the Kubernetes context is set to <code>docker-desktop</code>.</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="deploy-and-access-dashboard">Deploy and access dashboard<a class="hash-link" href="#deploy-and-access-dashboard" title="Direct link to heading">‚Äã</a></h3><p>After setting up the local Kubernetes you need to deploy the dashboard using the following steps: </p><ol><li>follow the instructions in <a href="https://github.com/kubernetes/dashboard" target="_blank" rel="noopener noreferrer">Kubernetes dashboard doc</a> to deploy the dashboard.</li><li>start the Kubernetes proxy in the background from a terminal to get access on the dashboard on the local host:   <div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl proxy </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>access the dashboard at the following URL: <a href="http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/login" target="_blank" rel="noopener noreferrer">clickable link</a></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="access-local-kubernetes-cluster">Access local Kubernetes cluster<a class="hash-link" href="#access-local-kubernetes-cluster" title="Direct link to heading">‚Äã</a></h3><p>The dashboard as deployed in the previous step requires a token or config to sign in. Here we use the token to sign in. The token is generated automatically and can be retrieved from the system.</p><ol><li>retrieve the name of the dashboard token:<div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system get secret </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> kubernetes-dashboard-token</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>retrieve the content of the token, note that the token name ends with a random 5 character code and needs to be replaced with the result of step 1. As an example:  <div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system describe secret kubernetes-dashboard-token-tf6n8</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>copy the token value which is part of the <code>Data</code> section with the tag <code>token</code>.</li><li>select the <strong>Token</strong> option in the dashboard web UI:<br><img alt="Token Access in dashboard" src="/zh-cn/assets/images/dashboard_token_select-a9c66b12d37a247d623e662d642b80be.png"></li><li>paste the token value into the input box and sign in:<br><img alt="Token Access in dashboard" src="/zh-cn/assets/images/dashboard_secret-80e18f88ceb541c0d70bcd1c60176290.png"></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="local-kubernetes-cluster-with-minikube">Local Kubernetes cluster with Minikube<a class="hash-link" href="#local-kubernetes-cluster-with-minikube" title="Direct link to heading">‚Äã</a></h2><p>Minikube can be added to an existing Docker Desktop install. Minikube can either use the pre-installed hypervisor or use a hypervisor of choice. These instructions use <a href="https://github.com/moby/hyperkit" target="_blank" rel="noopener noreferrer">HyperKit</a> which is embedded in Docker Desktop.   </p><p>If you want to use a different hypervisor then HyperKit make sure that you follow the generic minikube install instructions. Do not forget to install the correct driver for the chosen hypervisor if required.
The basic instructions are provided in the <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/" target="_blank" rel="noopener noreferrer">minikube install</a> instructions.</p><p>Check hypervisor Docker Desktop should have already installed HyperKit. In a terminal run: <code>hyperkit</code> to confirm. Any response other than <code>hyperkit: command not found</code> confirms that HyperKit is installed and on the path. If it is not found you can choose a different hypervisor or fix the Docker Desktop install.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installing-minikube">Installing Minikube<a class="hash-link" href="#installing-minikube" title="Direct link to heading">‚Äã</a></h3><ol><li>install minikube, you can either use brew or directly via these steps: <div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x minikube</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> minikube /usr/local/bin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>install HyperKit driver (required), you can either use brew or directly via these steps:<div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -LO https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-hyperkit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -o root -g wheel -m </span><span class="token number" style="color:rgb(247, 140, 108)">4755</span><span class="token plain"> docker-machine-driver-hyperkit /usr/local/bin/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>update the minikube config to default to the HyperKit install <code>minikube config set vm-driver hyperkit</code></li><li>change docker desktop to use minikube for Kubernetes:<br><img alt="Kubernetes in Docker Desktop: minikube setting" src="/zh-cn/assets/images/docker-dektop-minikube-741c814795983ad6133a5b5b33a2f398.png"></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="deploy-and-access-the-cluster">Deploy and access the cluster<a class="hash-link" href="#deploy-and-access-the-cluster" title="Direct link to heading">‚Äã</a></h3><p>After the installation is done you can start a new cluster.</p><ol><li>start the minikube cluster: <code>minikube start --kubernetes-version v1.14.2</code></li><li>start the minikube dashboard: <code>minikube dashboard &amp;</code></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="build-impact">Build impact<a class="hash-link" href="#build-impact" title="Direct link to heading">‚Äã</a></h3><p>When you create images make sure that the build is run after pointing it to the right environment.
Without setting the enviromnent minikube might not find the docker images when deploying the scheduler.</p><ol><li>make sure minikube is started</li><li>in the terminal where you wll run the build execute: <code>eval $(minikube docker-env)</code></li><li>run the image build from the yunikorn-k8shim repository root: <code>make image</code></li><li>deploy the scheduler as per the normal instructions.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="debug-code-locally">Debug code locally<a class="hash-link" href="#debug-code-locally" title="Direct link to heading">‚Äã</a></h2><p>Note, this instruction requires you have GoLand IDE for development.</p><p>In GoLand, go to yunikorn-k8shim project. Then click &quot;Run&quot; -&gt; &quot;Debug...&quot; -&gt; &quot;Edit Configuration...&quot; to get the pop-up configuration window.
Note, you need to click &quot;+&quot; to create a new profile if the <code>Go Build</code> option is not available at the first time.</p><p><img alt="Debug Configuration" src="/zh-cn/assets/images/goland_debug-bf10925ea3e1fdd82cfd32b6f4049678.jpg"></p><p>The highlighted fields are the configurations you need to add. These include:</p><ul><li>Run Kind: package</li><li>Package path: point to the path of <code>pkg/shim</code> package</li><li>Working directory: point to the path of the <code>conf</code> directory, this is where the program loads configuration file from</li><li>Program arguments: specify the arguments to run the program, such as <code>-kubeConfig=/path/to/.kube/config -interval=1s -clusterId=mycluster -clusterVersion=0.1 -name=yunikorn -policyGroup=queues -logEncoding=console -logLevel=-1</code>.
Note, you need to replace <code>/path/to/.kube/config</code> with the local path to the kubeconfig file. And if you want to change or add more options, you can run <code>_output/bin/k8s-yunikorn-scheduler -h</code> to find out.</li></ul><p>Once the changes are done, click &quot;Apply&quot;, then &quot;Debug&quot;. You will need to set proper breakpoints in order to debug the program.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="access-remote-kubernetes-cluster">Access remote Kubernetes cluster<a class="hash-link" href="#access-remote-kubernetes-cluster" title="Direct link to heading">‚Äã</a></h2><p>This setup assumes you have already installed a remote Kubernetes cluster.
For a generic view on how to access a multiple cluster and integrate it follow the <a href="https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/" target="_blank" rel="noopener noreferrer">accessing multiple clusters</a> documentation from Kubernetes.</p><p>Or follow these simplified steps:</p><ol><li>get the Kubernetes <code>config</code> file from remote cluster, copy it to the local machine and give it a unique name i.e. <code>config-remote</code></li><li>save the <code>KUBECONFIG</code> environment variable (if set)<div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">KUBECONFIG_SAVED</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$KUBECONFIG</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>add the new file to the environment variable<div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">KUBECONFIG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$KUBECONFIG</span><span class="token plain">:config-remote</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>run the command <code>kubectl config view</code> to check that both configs can be accessed</li><li>switch context using <code>kubectl config use-context my-remote-cluster</code></li><li>confirm that the current context is now switched to the remote cluster config:<div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl config get-contexts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CURRENT   NAME                   CLUSTER                      AUTHINFO             NAMESPACE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          docker-for-desktop     docker-for-desktop-cluster   docker-for-desktop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*         my-remote-cluster      kubernetes                   kubernetes-admin</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><p>More docs can be found <a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener noreferrer">here</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh-cn/docs/next/user_guide/trouble_shooting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Trouble Shooting</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh-cn/docs/next/developer_guide/build"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Build and Run</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#local-kubernetes-cluster-using-docker-desktop" class="table-of-contents__link toc-highlight">Local Kubernetes cluster using Docker Desktop</a><ul><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#deploy-and-access-dashboard" class="table-of-contents__link toc-highlight">Deploy and access dashboard</a></li><li><a href="#access-local-kubernetes-cluster" class="table-of-contents__link toc-highlight">Access local Kubernetes cluster</a></li></ul></li><li><a href="#local-kubernetes-cluster-with-minikube" class="table-of-contents__link toc-highlight">Local Kubernetes cluster with Minikube</a><ul><li><a href="#installing-minikube" class="table-of-contents__link toc-highlight">Installing Minikube</a></li><li><a href="#deploy-and-access-the-cluster" class="table-of-contents__link toc-highlight">Deploy and access the cluster</a></li><li><a href="#build-impact" class="table-of-contents__link toc-highlight">Build impact</a></li></ul></li><li><a href="#debug-code-locally" class="table-of-contents__link toc-highlight">Debug code locally</a></li><li><a href="#access-remote-kubernetes-cluster" class="table-of-contents__link toc-highlight">Access remote Kubernetes cluster</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ÂçöÂÆ¢</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.cloudera.com/yunikorn-a-universal-resources-scheduler/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>What&#x27;s YuniKorn?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.cloudera.com/apache-yunikorn-incubating-0-8-release-whats-new-and-upcoming/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>What&#x27;s new in YuniKorn 0.8.0?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>scheduler-core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>kubernetes-shim<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>scheduler-interface<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-web" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>scheduler-web<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Á§æÂå∫</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-cn/community/get_involved">ÂèÇ‰∏é</a></li><li class="footer__item"><a href="https://people.apache.org/phonebook.html?podling=yunikorn" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>ÂêçÂÜå<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://issues.apache.org/jira/projects/YUNIKORN/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="https://incubator.apache.org/images/incubator_feather_egg_logo.png" alt="Apache Incubator Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="https://incubator.apache.org/images/incubator_feather_egg_logo.png" alt="Apache Incubator Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">
<div style="font-size: 70%">
Copyright ¬© 2020-2022 <a href="https://www.apache.org/">The Apache Software Foundation</a>. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. <br>
<div style="padding:20px; margin: 10px; color: #4d4d4d;">
<p>Apache YuniKorn is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>

<p>The Apache Software Foundation Apache YuniKorn, YuniKorn, Apache, the Apache feather, and the Apache YuniKorn project logo are either registered trademarks or trademarks of the Apache Software Foundation.  Apache YuniKorn is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor.</p>
</div>
</div></div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.18d1a2dd.js"></script>
<script src="/zh-cn/assets/js/main.ee0addbe.js"></script>
</body>
</html>